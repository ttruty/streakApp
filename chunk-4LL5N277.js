import{a as Zt,b as ei}from"./chunk-YXDKGDQG.js";import{a as ti}from"./chunk-UJLYQUWO.js";import{a as Z,b as $t,c as Nt,d as z,e as q,f as Ut,g as X,h as G,i as $,j as Yt,k as N,l as Wt,m as Qt,n as Jt,p as U,q as Y,r as W,s as Q,t as J,u as K}from"./chunk-W7ZP37CT.js";import{a as Kt}from"./chunk-Y2KGYOTM.js";import"./chunk-CQTJX6PO.js";import"./chunk-QUJFQN2Y.js";import"./chunk-5IBAPVH7.js";import"./chunk-JMSADOBL.js";import"./chunk-MSHXVBB7.js";import"./chunk-7FY2OE2O.js";import"./chunk-JXYYGUZK.js";import"./chunk-EDFG7ZPH.js";import"./chunk-N3T6NI5B.js";import"./chunk-MCSSOQW3.js";import{I as Lt,L as Rt,b as At,ha as jt,la as zt,oa as qt,qa as Xt,sa as Gt}from"./chunk-62L7SKDK.js";import{$ as it,Aa as yt,Ba as Mt,C as Ge,Ca as wt,Da as St,Ea as kt,Fa as Pt,Ga as Ot,H as $e,Ha as It,I as Ne,Ia as Dt,J as j,Ja as Et,K as Ue,L as Ye,N as We,Na as Tt,Oa as Vt,P as Qe,Pa as Ht,Qa as Ft,Ra as Bt,T as Je,V as Ke,W as Ze,Z as et,_ as tt,a as I,b as Oe,ba as nt,ca as ot,d as Ie,da as at,ea as rt,f as De,fa as st,g as Ee,ga as ct,h as A,ha as lt,i as Te,j as Ve,k as L,ka as dt,l as He,la as mt,m as R,n as Fe,na as pt,o as Be,oa as ht,p as Ae,pa as ut,r as Le,ra as gt,sa as ft,t as Re,ta as bt,v as je,va as _t,wa as vt,x as ze,y as qe,ya as Ct,z as Xe,za as xt}from"./chunk-UECXXAY2.js";import"./chunk-SCAGZU2L.js";import"./chunk-ZP6ROK2P.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-GK6NCVGY.js";import"./chunk-CKP3SGE2.js";import"./chunk-4JAQTSOB.js";import{$ as ie,Aa as se,C as s,Da as V,E as g,Eb as xe,Fb as ye,G as y,Hb as Me,Ia as ce,K as M,Kb as we,Lb as Se,Mb as ke,Nb as Pe,P as h,Q as n,R as a,S as p,T as H,Ta as le,U as F,Z as D,_ as f,aa as C,ea as ne,fa as oe,ga as ae,ia as w,ka as d,la as v,ma as O,mb as de,na as re,nb as me,ob as pe,qb as he,rb as ue,sb as ge,t as b,tb as fe,u as _,ua as B,ub as be,vb as _e,wb as ve,ya as E,yb as Ce,za as T}from"./chunk-7WHQ53J5.js";import"./chunk-PGVWJ64G.js";import"./chunk-YG7LLWQI.js";import"./chunk-3ZMQLOZX.js";import"./chunk-QUPCUN75.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-663TVV7P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as x}from"./chunk-JHI3MBHO.js";var si=["rendererCanvas"],ii=(()=>{let c=class c{toggleEffect(){this.currentEffect=this.currentEffect==="stars"?"grid":"stars"}constructor(e){this.charService=e,this.clock=new qt,this.animationId=0,this.spinSpeed=0,this.isDragging=!1,this.previousMouseX=0,this.rotationSpeed=.005,this.currentEffect="stars",B(()=>{let t=this.charService.loadout();this.scene&&(console.log("Signal detected change! Reloading..."),this.loadCustomCharacter(t))})}ngAfterViewInit(){this.initThree()}ngOnDestroy(){this.animationId&&cancelAnimationFrame(this.animationId),this.renderer&&this.renderer.dispose()}onStart(e){this.isDragging=!0,this.previousMouseX=e.clientX}onMove(e){this.handleInput(e.clientX)}onTouchStart(e){this.isDragging=!0,this.previousMouseX=e.touches[0].clientX}onTouchMove(e){this.handleInput(e.touches[0].clientX)}onEnd(){this.isDragging=!1}handleInput(e){if(!this.isDragging||!this.model)return;let t=e-this.previousMouseX;this.model.rotation.y+=t*this.rotationSpeed,this.previousMouseX=e}initThree(){let e=this.rendererCanvas.nativeElement.parentElement,t=e.clientWidth||300,i=e.clientHeight||400;this.scene=new Rt,this.camera=new Lt(45,t/i,.1,1e3),this.camera.position.set(0,-.25,4),this.renderer=new Gt({canvas:this.rendererCanvas.nativeElement,antialias:!0,alpha:!0}),this.renderer.setSize(t,i);let o=new jt(16777215,4473924,1.2);o.position.set(0,20,0),this.scene.add(o);let m=new zt(16777215,1.5);m.position.set(3,10,10),this.scene.add(m),this.loadCustomCharacter(),this.animate()}loadCustomCharacter(e=null){this.model&&this.scene.remove(this.model);let t=e||this.charService.loadRaiderFromStorage();(!t||!t.base)&&(t={base:this.charService.ASSET_LIBRARY.base[0],hat:null,backpack:null,item:null});let i=this.charService.getAssetDetails("base",t.base);if(!i){console.error("Could not resolve base model");return}new Z().load(i.modelUrl,m=>{this.model=m.scene,this.model.scale.set(1,1,1),this.model.position.set(0,-1,0),this.scene.add(this.model),m.animations.length>0&&(this.mixer=new Xt(this.model),this.mixer.clipAction(m.animations[0]).play()),t.hat&&this.attachSmartAccessory("hat",t.hat,"mixamorigHead"),t.backpack&&this.attachSmartAccessory("backpack",t.backpack,"mixamorigSpine2"),t.item&&this.attachSmartAccessory("item",t.item,"mixamorigRightHand")})}attachSmartAccessory(e,t,i){let o=this.charService.getAssetDetails(e,t);if(!o)return;let m=this.model.getObjectByName(i);if(!m)return;new Z().load(o.modelUrl,S=>{let k=S.scene;k.traverse(P=>{P.isMesh&&(P.castShadow=!0,P.receiveShadow=!0,P.material&&(P.material.side=At))}),o.scale&&k.scale.setScalar(o.scale),o.rotation&&k.rotation.set(...o.rotation),o.offset&&k.position.set(...o.offset),m.add(k)})}animate(){this.animationId=requestAnimationFrame(()=>this.animate());let e=this.clock.getDelta();this.mixer&&this.mixer.update(e),this.model&&this.spinSpeed>.001?(this.model.rotation.y+=this.spinSpeed,this.spinSpeed*=.95):this.spinSpeed=0,this.renderer.render(this.scene,this.camera)}};c.\u0275fac=function(t){return new(t||c)(g(K))},c.\u0275cmp=y({type:c,selectors:[["app-character-model"]],viewQuery:function(t,i){if(t&1&&ne(si,5),t&2){let o;oe(o=ae())&&(i.rendererCanvas=o.first)}},decls:7,vars:3,consts:[["rendererCanvas",""],[1,"character-section"],[1,"three-canvas",3,"mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"],[1,"level-badge"],[1,"xp-badge"]],template:function(t,i){if(t&1){let o=D();H(0,"div",1)(1,"canvas",2,0),ie("mousedown",function(u){return b(o),_(i.onStart(u))})("mousemove",function(u){return b(o),_(i.onMove(u))})("mouseup",function(){return b(o),_(i.onEnd())})("mouseleave",function(){return b(o),_(i.onEnd())})("touchstart",function(u){return b(o),_(i.onTouchStart(u))})("touchmove",function(u){return b(o),_(i.onTouchMove(u))})("touchend",function(){return b(o),_(i.onEnd())}),F(),H(3,"div",3),d(4),F(),H(5,"div",4),d(6),F()()}t&2&&(s(4),O("Level ",i.charService.state.level),s(2),re("",i.charService.state.currentXp," / ",i.charService.state.maxXp," XP"))},styles:[".character-section[_ngcontent-%COMP%]{flex:1;height:30vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(to bottom,#4b4b4b,#000);position:relative;overflow:hidden;min-height:30vh}.character-section[_ngcontent-%COMP%]   .three-canvas[_ngcontent-%COMP%]{width:100%;height:100%;display:block;outline:none}.character-section[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);background:var(--ion-color-primary);color:#fff;padding:5px 15px;border-radius:20px;font-weight:700;z-index:10}.character-section[_ngcontent-%COMP%]   .xp-badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;align-items:center;gap:5px;background:#303030;padding:5px 12px;border-radius:20px;border:1px solid #4b60ff}.character-section[_ngcontent-%COMP%]   .xp-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#f57f17}"]});let l=c;return l})();function li(l,c){if(l&1&&(n(0,"div"),d(1),a()),l&2){let r=c.$implicit;s(),v(r)}}function di(l,c){if(l&1&&(n(0,"div",19),M(1,li,2,1,"div",20),a()),l&2){let r=C();s(),h("ngForOf",r.weekDays)}}function mi(l,c){if(l&1&&(n(0,"div",21)(1,"span"),d(2),a()()),l&2){let r=c.$implicit;w("empty",r.isEmpty)("completed",r.status==="completed")("missed",!r.isEmpty&&r.status==="missed")("today-border",r.isToday),s(2),v(r.label)}}var oi=(()=>{let c=class c{constructor(e){this.modalCtrl=e,this.segmentValue="month",this.currentViewDate=new Date,this.viewTitle="",this.gridSquares=[],this.weekDays=["S","M","T","W","T","F","S"],I({chevronBack:Re,chevronForward:je})}ngOnInit(){this.updateView()}close(){this.modalCtrl.dismiss()}segmentChanged(e){this.segmentValue=e.detail.value,this.currentViewDate=new Date,this.updateView()}changeDate(e){let t=new Date(this.currentViewDate);this.segmentValue==="week"?t.setDate(t.getDate()+e*7):this.segmentValue==="month"?t.setMonth(t.getMonth()+e):this.segmentValue==="year"&&t.setFullYear(t.getFullYear()+e),this.currentViewDate=t,this.updateView()}updateView(){this.segmentValue==="week"?this.generateWeekGrid():this.segmentValue==="month"?this.generateMonthGrid():this.segmentValue==="year"&&this.generateYearGrid()}generateWeekGrid(){let e=new Date(this.currentViewDate),t=e.getDay();e.setDate(e.getDate()-t),this.viewTitle=`Week of ${e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`,this.gridSquares=[];for(let i=0;i<7;i++){let o=new Date(e);o.setDate(o.getDate()+i),this.pushDayToGrid(o)}}generateMonthGrid(){let e=this.currentViewDate.getFullYear(),t=this.currentViewDate.getMonth();this.viewTitle=this.currentViewDate.toLocaleDateString("en-US",{month:"long",year:"numeric"}),this.gridSquares=[];let o=new Date(e,t,1).getDay();for(let u=0;u<o;u++)this.gridSquares.push({isEmpty:!0});let m=new Date(e,t+1,0).getDate();for(let u=1;u<=m;u++){let S=new Date(e,t,u);this.pushDayToGrid(S)}}generateYearGrid(){let e=this.currentViewDate.getFullYear();this.viewTitle=`${e}`,this.gridSquares=[];let t=e%4===0&&e%100!==0||e%400===0?366:365;for(let i=0;i<t;i++){let o=new Date(e,0,1);o.setDate(o.getDate()+i),this.pushDayToGrid(o,!0)}}pushDayToGrid(e,t=!1){let i=e.toDateString(),o=this.habit.history.some(S=>S.date===i),m=i===new Date().toDateString(),u=o||m&&this.habit.completed;this.gridSquares.push({date:e,label:t?"":e.getDate(),status:u?"completed":"missed",isToday:m})}};c.\u0275fac=function(t){return new(t||c)(g(W))},c.\u0275cmp=y({type:c,selectors:[["app-habit-detail-modal"]],inputs:{habit:"habit"},decls:35,vars:6,consts:[["slot","end"],[3,"click"],[1,"ion-padding"],["mode","ios",1,"ion-margin-bottom",3,"ionChange","value"],["value","week"],["value","month"],["value","year"],[1,"calendar-nav"],["fill","clear",3,"click"],["name","chevron-back"],[1,"nav-title"],["name","chevron-forward"],["class","days-header",4,"ngIf"],[1,"heatmap-container",3,"ngClass"],["class","heatmap-square",3,"empty","completed","missed","today-border",4,"ngFor","ngForOf"],[1,"legend"],[1,"legend-item"],[1,"dot","green"],[1,"dot","grey"],[1,"days-header"],[4,"ngFor","ngForOf"],[1,"heatmap-square"]],template:function(t,i){t&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3),a(),n(4,"ion-buttons",0)(5,"ion-button",1),f("click",function(){return i.close()}),d(6,"Close"),a()()()(),n(7,"ion-content",2)(8,"ion-segment",3),f("ionChange",function(m){return i.segmentChanged(m)}),n(9,"ion-segment-button",4)(10,"ion-label"),d(11,"Week"),a()(),n(12,"ion-segment-button",5)(13,"ion-label"),d(14,"Month"),a()(),n(15,"ion-segment-button",6)(16,"ion-label"),d(17,"Year"),a()()(),n(18,"div",7)(19,"ion-button",8),f("click",function(){return i.changeDate(-1)}),p(20,"ion-icon",9),a(),n(21,"div",10),d(22),a(),n(23,"ion-button",8),f("click",function(){return i.changeDate(1)}),p(24,"ion-icon",11),a()(),M(25,di,2,1,"div",12),n(26,"div",13),M(27,mi,3,9,"div",14),a(),n(28,"div",15)(29,"div",16),p(30,"span",17),d(31," Done"),a(),n(32,"div",16),p(33,"span",18),d(34," Empty"),a()()()),t&2&&(s(3),v(i.habit.title),s(5),h("value",i.segmentValue),s(14),v(i.viewTitle),s(3),h("ngIf",i.segmentValue!=="year"),s(),h("ngClass",i.segmentValue),s(),h("ngForOf",i.gridSquares))},dependencies:[V,E,T,se,Q,z,q,X,G,$,N,Qt,Jt,U,Y,Nt],styles:[".calendar-nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;background:#1e1e1e;border-radius:12px;padding:5px}.calendar-nav[_ngcontent-%COMP%]   .nav-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#fff}.days-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-bottom:8px;text-align:center}.days-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#666}.heatmap-container[_ngcontent-%COMP%]{display:grid;gap:8px}.heatmap-container.week[_ngcontent-%COMP%], .heatmap-container.month[_ngcontent-%COMP%]{grid-template-columns:repeat(7,1fr)}.heatmap-container.year[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(12px,1fr));gap:4px}.heatmap-square[_ngcontent-%COMP%]{aspect-ratio:1;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:600;color:#888;background:#2a2a2a}.heatmap-square.empty[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.heatmap-square.completed[_ngcontent-%COMP%]{background:var(--ion-color-success);color:#fff;box-shadow:0 0 10px #2dd36f4d}.heatmap-square.today-border[_ngcontent-%COMP%]{border:2px solid white}.legend[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:24px;margin-top:30px;margin-bottom:10px}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;font-weight:500;color:#aaa}.dot[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:4px;display:block}.dot.green[_ngcontent-%COMP%]{background:var(--ion-color-success);box-shadow:0 0 6px #2dd36f66}.dot.grey[_ngcontent-%COMP%]{background:#2a2a2a;border:1px solid rgba(255,255,255,.05)}"]});let l=c;return l})();function hi(l,c){if(l&1){let r=D();n(0,"ion-item",4),f("click",function(){let t=b(r).$implicit,i=C();return _(i.selectBuff(t))}),n(1,"div",8),p(2,"ion-icon",9),a(),n(3,"ion-label")(4,"h2"),d(5),a(),n(6,"p"),d(7),a(),n(8,"div",10)(9,"span"),d(10),a(),n(11,"span"),d(12),a()()(),p(13,"ion-checkbox",6),a()}if(l&2){let r=c.$implicit,e=C();s(),h("ngClass",r.type),s(),h("name",r.icon),s(3),v(r.name),s(2),v(r.description),s(2),w("positive",r.xpMultiplier>1)("negative",r.xpMultiplier<1),s(),O(" XP: x",r.xpMultiplier," "),s(),w("positive",r.statMultiplier>1)("negative",r.statMultiplier<1),s(),O(" Stats: x",r.statMultiplier," "),s(),h("checked",e.activeId()===r.id)}}var ai=(()=>{let c=class c{constructor(e,t){this.modalCtrl=e,this.buffService=t,this.buffs=[],this.buffs=this.buffService.AVAILABLE_BUFFS,I({cafe:R,book:L,bed:A,flame:j,closeCircleOutline:qe})}activeId(){return this.buffService.activeBuff()?.id||null}selectBuff(e){this.buffService.activateBuff(e)}close(){this.modalCtrl.dismiss()}};c.\u0275fac=function(t){return new(t||c)(g(W),g(J))},c.\u0275cmp=y({type:c,selectors:[["app-buff-modal"]],decls:20,vars:2,consts:[["slot","end"],[3,"click"],[1,"ion-padding"],[1,"intro"],["button","","lines","none",1,"buff-item",3,"click"],["slot","start","name","close-circle-outline"],["slot","end",3,"checked"],["button","","lines","none","class","buff-item",3,"click",4,"ngFor","ngForOf"],["slot","start",1,"icon-box",3,"ngClass"],[3,"name"],[1,"stats-preview"]],template:function(t,i){t&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3,"Daily Status"),a(),n(4,"ion-buttons",0)(5,"ion-button",1),f("click",function(){return i.close()}),d(6,"Close"),a()()()(),n(7,"ion-content",2)(8,"p",3),d(9,"Choose a status effect for today. This will alter your XP and Stat gains."),a(),n(10,"ion-item",4),f("click",function(){return i.selectBuff(null)}),p(11,"ion-icon",5),n(12,"ion-label")(13,"h2"),d(14,"Normal"),a(),n(15,"p"),d(16,"No modifiers active."),a()(),p(17,"ion-checkbox",6),a(),n(18,"ion-list"),M(19,hi,14,15,"ion-item",7),a()()),t&2&&(s(17),h("checked",i.activeId()===null),s(2),h("ngForOf",i.buffs))},dependencies:[V,E,T,Q,z,q,Ut,X,G,$,Yt,N,Wt,U,Y,$t],styles:[".buff-item[_ngcontent-%COMP%]{margin-bottom:10px;--background: #1e1e1e;--border-radius: 12px}.intro[_ngcontent-%COMP%]{color:#888;font-size:14px;text-align:center;margin-bottom:20px}.icon-box[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:20px}.icon-box.buff[_ngcontent-%COMP%]{background:rgba(var(--ion-color-success-rgb),.2);color:var(--ion-color-success)}.icon-box.debuff[_ngcontent-%COMP%]{background:rgba(var(--ion-color-medium-rgb),.2);color:var(--ion-color-medium)}.icon-box.challenge[_ngcontent-%COMP%]{background:rgba(var(--ion-color-danger-rgb),.2);color:var(--ion-color-danger)}.icon-box.tradeoff[_ngcontent-%COMP%]{background:rgba(var(--ion-color-warning-rgb),.2);color:var(--ion-color-warning)}.stats-preview[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:5px;font-size:12px;font-weight:700}.stats-preview[_ngcontent-%COMP%]   span.positive[_ngcontent-%COMP%]{color:var(--ion-color-success)}.stats-preview[_ngcontent-%COMP%]   span.negative[_ngcontent-%COMP%]{color:var(--ion-color-danger)}"]});let l=c;return l})();function ui(l,c){if(l&1){let r=D();n(0,"ion-item-sliding")(1,"ion-item",11)(2,"div",12)(3,"div",13),p(4,"i")(5,"i")(6,"i")(7,"i")(8,"i")(9,"i")(10,"i")(11,"i"),a(),n(12,"div",13),p(13,"i")(14,"i")(15,"i")(16,"i")(17,"i")(18,"i")(19,"i")(20,"i"),a(),n(21,"div",13),p(22,"i")(23,"i")(24,"i")(25,"i")(26,"i")(27,"i")(28,"i")(29,"i"),a()(),n(30,"ion-checkbox",14),f("ionChange",function(t){let i=b(r).$implicit,o=C();return _(o.onToggleHabit(t,i))}),a(),n(31,"div",15),p(32,"ion-icon",16),a(),n(33,"div",17),f("click",function(){let t=b(r).$implicit,i=C();return _(i.openHabitDetail(t))}),n(34,"ion-label")(35,"h2"),d(36),a(),n(37,"div",18),p(38,"ion-icon",19),n(39,"span"),d(40),a()()()(),n(41,"div",20),p(42,"ion-icon",16),n(43,"span"),d(44),a()()(),n(45,"ion-item-options",21)(46,"ion-item-option",22),f("click",function(){let t=b(r).$implicit,i=C();return _(i.deleteHabit(t))}),p(47,"ion-icon",23),a()()()}if(l&2){let r=c.$implicit,e=C();w("pop-out",e.animatingHabits.has(r.id)),s(),w("rarity-low",r.reward==="low")("rarity-medium",r.reward==="medium")("rarity-high",r.reward==="high"),s(29),h("checked",r.completed),s(2),h("name",r.icon),s(4),v(r.title),s(4),O("",r.streak," Days"),s(),h("ngClass",r.associatedStat),s(),h("name",e.getStatIcon(r.associatedStat)),s(2),v(r.associatedStat)}}var Yi=(()=>{let c=class c{constructor(e,t,i,o,m,u,S,k,P){this.modalCtrl=e,this.habitService=t,this.toastCtrl=i,this.alertCtrl=o,this.charService=m,this.soundService=u,this.achService=S,this.router=k,this.buffService=P,this.habits=[],this.animatingHabits=new Set,I({settingsOutline:ft}),I({water:Ht,barbell:De,book:L,bed:A,bicycle:Ve,briefcase:He,gameController:We,fastFood:$e,musicalNotes:rt,paw:st,sunny:Mt,moon:at,alarm:Ie,cart:Ae,cafe:R,medkit:nt,school:gt,trash:Pt,skull:vt,trophy:Ot,rocket:ht,rose:ut,fitness:Ne,flask:Ye,hammer:Qe,heart:Je,hourglass:Ke,key:Ze,library:et,mail:tt,map:it,mic:ot,pencil:ct,people:lt,pizza:dt,planet:mt,restaurant:pt,shapes:bt,shirt:_t,sparkles:Ct,star:xt,storefront:yt,terminal:wt,thumbsUp:St,timer:kt,tv:It,umbrella:Dt,videocam:Et,walk:Tt,wallet:Vt,wifi:Ft,wine:Bt,accessibility:Oe,basket:Ee,beer:Te,camera:Fe,car:Be,chatbubble:Le,clipboard:ze,colorPalette:Xe,desktop:Ge,flame:j,flash:Ue}),B(()=>{let te=this.achService.lastUnlocked();te&&this.presentAchievementToast(te)})}presentAchievementToast(e){return x(this,null,function*(){yield(yield this.toastCtrl.create({header:"Achievement Unlocked!",message:`${e.title} - Click to Claim`,position:"top",duration:4e3,color:"warning",icon:"trophy",buttons:[{side:"end",text:"CLAIM",handler:()=>{this.router.navigate(["/tabs/character"])}}]})).present()})}ionViewDidEnter(){this.habitService.checkDateAndReset(),this.refreshData()}openHabitDetail(e){return x(this,null,function*(){return yield(yield this.modalCtrl.create({component:oi,componentProps:{habit:e}})).present()})}openBuffModal(){return x(this,null,function*(){yield(yield this.modalCtrl.create({component:ai,initialBreakpoint:.6,breakpoints:[0,.6,1]})).present()})}deleteHabit(e){return x(this,null,function*(){yield(yield this.alertCtrl.create({header:"Delete Habit?",message:`Are you sure you want to remove "${e.title}"?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:()=>{this.habitService.deleteHabit(e.id),this.refreshData(),this.showToast("Habit deleted")}}]})).present()})}getStatIcon(e){switch(e){case"strength":return"barbell";case"intelligence":return"book";case"constitution":return"heart";case"dexterity":return"flash";case"charisma":return"chatbubble";default:return"help-circle"}}getStatLabel(e){return e?e.substring(0,3).toUpperCase():""}showToast(e){return x(this,null,function*(){(yield this.toastCtrl.create({message:e,duration:1500,position:"bottom"})).present()})}onToggleHabit(e,t){return x(this,null,function*(){if(e.detail.checked)this.soundService.play("boop"),this.animatingHabits.add(t.id),setTimeout(()=>{this.habitService.completeHabit(t.id,"happy"),this.achService.notifyHabitComplete(t.streak),this.charService.modifyStat(t.associatedStat,t.difficulty,!1),this.refreshData(),this.animatingHabits.delete(t.id)},500);else{this.habitService.uncompleteHabit(t.id),this.charService.modifyStat(t.associatedStat,t.difficulty,!0),this.refreshData();return}})}refreshData(){let e=this.habitService.getHabits();this.habits=e.filter(t=>!t.completed)}openSettings(){return x(this,null,function*(){yield(yield this.modalCtrl.create({component:ei,initialBreakpoint:1,breakpoints:[0,.5,1],handle:!0})).present()})}};c.\u0275fac=function(t){return new(t||c)(g(Me),g(ti),g(Se),g(we),g(K),g(Zt),g(Kt),g(ce),g(J))},c.\u0275cmp=y({type:c,selectors:[["app-dashboard"]],decls:19,vars:3,consts:[[1,"ion-no-border"],["slot","start"],["slot","end"],[3,"click"],["name","flash",3,"color"],["name","settings-outline"],["scrollY","false",3,"fullscreen"],[1,"split-layout"],[1,"habits-section"],["lines","none",1,"habit-list"],[3,"pop-out",4,"ngFor","ngForOf"],[1,"habit-item"],[1,"fireworks"],[1,"burst"],["slot","start",3,"ionChange","checked"],["slot","start",1,"habit-icon-circle"],[3,"name"],[1,"content-wrapper",2,"flex","1","display","flex","align-items","center",3,"click"],[1,"streak-chip"],["name","flame"],[1,"stat-chip",3,"ngClass"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(t,i){t&1&&(n(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),p(3,"ion-menu-button"),a(),n(4,"ion-title"),d(5,"ARC Runners"),a(),n(6,"ion-buttons",2)(7,"ion-button",3),f("click",function(){return i.openBuffModal()}),p(8,"ion-icon",4),a(),n(9,"ion-button",3),f("click",function(){return i.openSettings()}),p(10,"ion-icon",5),a()()()(),n(11,"ion-content",6)(12,"div",7),p(13,"app-character-model"),n(14,"div",8)(15,"h3"),d(16,"Today's Quests"),a(),n(17,"ion-list",9),M(18,ui,48,15,"ion-item-sliding",10),a()()()()),t&2&&(s(8),h("color",i.buffService.activeBuff()?"warning":"medium"),s(3),h("fullscreen",!0),s(7),h("ngForOf",i.habits))},dependencies:[V,E,T,le,ii,pe,he,xe,ye,me,Ce,de,Pe,ve,ue,_e,ke,be,fe,ge],styles:[".urbanist-font[_ngcontent-%COMP%]{font-family:Urbanist,sans-serif!important}.split-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden}.habits-section[_ngcontent-%COMP%]{overflow-y:auto;-webkit-overflow-scrolling:touch;flex:1;background:#000;border-top-left-radius:30px;border-top-right-radius:30px;box-shadow:0 -5px 20px #0000000d;padding:20px 20px 100px;margin-top:-20px;z-index:10}.habit-item[_ngcontent-%COMP%]{margin-bottom:0;--border-radius: 12px;border-radius:12px;--color: white}.habit-item.rarity-low[_ngcontent-%COMP%]{--background: #37474f;border:1px solid #546e7a}.habit-item.rarity-medium[_ngcontent-%COMP%]{--background: #1565c0;border:1px solid #42a5f5}.habit-item.rarity-high[_ngcontent-%COMP%]{--background: #5d144b;border:1px solid #ff00e6}ion-item-sliding[_ngcontent-%COMP%]{margin-bottom:12px;background:transparent;border-radius:12px}.habit-list[_ngcontent-%COMP%]{border-radius:10px}.streak-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;background:#fff3;padding:4px 10px;border-radius:20px;margin-top:6px;width:fit-content}.streak-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;color:#ffca28}.streak-chip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#fff;letter-spacing:.5px}.meta-row[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:6px}.stat-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;border-radius:6px;font-size:10px;font-weight:800;letter-spacing:.5px;background:#0003;color:#fff;border:1px solid rgba(255,255,255,.1)}.stat-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.stat-chip.strength[_ngcontent-%COMP%]{background:#f4433633;color:#ff8a80;border-color:#f44336}.stat-chip.intelligence[_ngcontent-%COMP%]{background:#2196f333;color:#90caf9;border-color:#2196f3}.stat-chip.constitution[_ngcontent-%COMP%]{background:#4caf5033;color:#a5d6a7;border-color:#4caf50}.stat-chip.dexterity[_ngcontent-%COMP%]{background:#ff980033;color:#ffcc80;border-color:#ff9800}.stat-chip.charisma[_ngcontent-%COMP%]{background:#9c27b033;color:#ce93d8;border-color:#9c27b0}.streak-chip[_ngcontent-%COMP%]{height:fit-content}.fireworks[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:10}.pop-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pop 1s ease-out forwards}.burst[_ngcontent-%COMP%]{position:absolute;width:0;height:0}.burst[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;width:6px;height:6px;border-radius:50%;opacity:0}.burst[_ngcontent-%COMP%]:nth-child(1){top:50%;left:40px}.burst[_ngcontent-%COMP%]:nth-child(2){top:30%;left:40%}.burst[_ngcontent-%COMP%]:nth-child(3){top:60%;left:70%}.pop-out[_ngcontent-%COMP%]   .burst[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bang .6s ease-out forwards}.burst[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(1){background:#3880ff;--x: 43px;--y: -38px}.burst[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(2){background:#3880ff;--x: -15px;--y: -27px}.burst[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(3){background:#eb445a;--x: -46px;--y: 9px}.burst[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(4){background:#9d46ff;--x: 28px;--y: -39px}.burst[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(5){background:#9d46ff;--x: -49px;--y: 2px}.burst[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(6){background:#3880ff;--x: 49px;--y: 50px}.burst[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(7){background:#eb445a;--x: -2px;--y: 41px}.burst[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:nth-child(8){background:#2dd36f;--x: -42px;--y: 36px}@keyframes _ngcontent-%COMP%_pop{0%{transform:translate(0) scale(1.1);opacity:1}10%{transform:translate(0) scale(1.2);opacity:.9}to{transform:translate(var(--x),var(--y)) scale(0);opacity:0}}@keyframes _ngcontent-%COMP%_bang{0%{transform:translate(0) scale(2);opacity:1}to{transform:translate(var(--x),var(--y)) scale(0);opacity:0}}"]});let l=c;return l})();export{Yi as DashboardPage};
