import{F as B,G as L,I as K,K as N,L as Q,X as Y,Y as q,ra as J,sa as $}from"./chunk-62L7SKDK.js";import{H as G,K as V,a as A,s as W,z as j}from"./chunk-R2QO6RYX.js";import{Aa as M,C as s,Da as u,Db as z,E,Eb as H,G as g,Ja as b,K as y,Mb as F,P as l,Q as o,R as a,S as d,V as _,ea as S,fa as C,ga as P,ia as O,ka as f,la as v,m as k,mb as T,ob as I,qb as R,za as D}from"./chunk-FBRAC5VV.js";import"./chunk-VJC7EZAS.js";import"./chunk-4FZP3PRC.js";import"./chunk-3YVIQ775.js";import"./chunk-7KXLFOKO.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-XO2KZLEH.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var ee=["bgCanvas"],X=(()=>{let n=class n{set effect(t){this._effect=t,this.scene&&this.loadEffect(t)}constructor(){this._effect="stars",this.frameId=0,this.onResize=()=>{let t=window.innerWidth,e=window.innerHeight;this.renderer.setSize(t,e),this.camera.aspect=t/e,this.camera.updateProjectionMatrix()}}ngOnInit(){this.initThree(),this.loadEffect(this._effect),this.animate(),window.addEventListener("resize",this.onResize)}ngOnDestroy(){this.frameId&&cancelAnimationFrame(this.frameId),window.removeEventListener("resize",this.onResize),this.renderer&&this.renderer.dispose()}initThree(){let t=window.innerWidth,e=window.innerHeight;this.scene=new Q,this.camera=new K(75,t/e,.1,1e3),this.camera.position.z=5,this.renderer=new $({canvas:this.canvasRef.nativeElement,alpha:!0,antialias:!0}),this.renderer.setSize(t,e),this.renderer.setPixelRatio(window.devicePixelRatio)}loadEffect(t){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0]);t==="stars"?this.createStarfield():this.createDigitalGrid()}createStarfield(){let t=new L,e=2e3,r=new Float32Array(e*3);for(let m=0;m<e*3;m++)r[m]=(Math.random()-.5)*15;t.setAttribute("position",new B(r,3));let c=new Y({size:.02,color:16777215,transparent:!0,opacity:.8});this.particles=new q(t,c),this.scene.add(this.particles)}createDigitalGrid(){this.grid=new J(50,50,65535,16711935),this.grid.position.y=-1,this.scene.add(this.grid),this.scene.fog=new N(1114129,.15)}animate(){this.frameId=requestAnimationFrame(()=>this.animate()),this._effect==="stars"&&this.particles&&(this.particles.rotation.y+=5e-4,this.particles.rotation.x+=2e-4),this._effect==="grid"&&this.grid&&(this.grid.position.z=Date.now()*.002%1),this.renderer.render(this.scene,this.camera)}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=g({type:n,selectors:[["app-three-background"]],viewQuery:function(e,r){if(e&1&&S(ee,7),e&2){let c;C(c=P())&&(r.canvasRef=c.first)}},inputs:{effect:"effect"},decls:2,vars:0,consts:[["bgCanvas",""]],template:function(e,r){e&1&&_(0,"canvas",null,0)},dependencies:[u],styles:["[_nghost-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1;overflow:hidden;pointer-events:none}canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"]});let i=n;return i})();var Z=(()=>{let n=class n{constructor(){this.STORAGE_KEY="user_streak_data"}checkIn(){let t=new Date().toDateString(),e=this.getData();if(e.lastVisit===t)return e.currentStreak;let r=new Date;return r.setDate(r.getDate()-1),e.lastVisit===r.toDateString()?e.currentStreak++:e.currentStreak=1,e.lastVisit=t,e.history.includes(t)||e.history.push(t),this.saveData(e),e.currentStreak}getCurrentWeekProgress(){let t=this.getData(),e=new Date,r=[],c=new Date(e.setDate(e.getDate()-e.getDay())),m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let p=0;p<7;p++){let x=new Date(c);x.setDate(c.getDate()+p);let w=x.toDateString();r.push({name:m[p],dateStr:w,visited:t.history.includes(w),isToday:w===new Date().toDateString()})}return r}getData(){let t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):{currentStreak:0,lastVisit:null,history:[]}}saveData(t){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();function ne(i,n){i&1&&d(0,"ion-icon",19)}function ie(i,n){i&1&&d(0,"ion-icon",20)}function re(i,n){if(i&1&&(o(0,"div",14)(1,"span",15),f(2),a(),o(3,"div",16),y(4,ne,1,0,"ion-icon",17)(5,ie,1,0,"ion-icon",18),a()()),i&2){let h=n.$implicit;O("today",h.isToday),s(2),v(h.name),s(2),l("ngIf",h.visited),s(),l("ngIf",!h.visited)}}var ge=(()=>{let n=class n{constructor(t){this.streakService=t,this.currentStreak=0,this.weekProgress=[],this.currentEffect="stars",A({flame:V,checkmarkCircle:W,ellipseOutline:G,closeCircleOutline:j})}toggleEffect(){this.currentEffect=this.currentEffect==="stars"?"grid":"stars"}ionViewWillEnter(){this.currentStreak=this.streakService.checkIn(),this.weekProgress=this.streakService.getCurrentWeekProgress()}};n.\u0275fac=function(e){return new(e||n)(E(Z))},n.\u0275cmp=g({type:n,selectors:[["app-home"]],decls:22,vars:5,consts:[[1,"ion-no-border",3,"translucent"],[1,"ion-padding",3,"fullscreen"],[3,"effect"],[1,"close-container"],["routerLink","/tabs/dashboard","fill","clear","size","large"],["name","close-circle-outline"],[1,"container"],[1,"streak-circle-container"],[1,"streak-circle"],["name","flame","color","warning"],[2,"color","rgb(0, 0, 0)"],[1,"week-container"],[1,"week-grid"],["class","day-column",3,"today",4,"ngFor","ngForOf"],[1,"day-column"],[1,"day-label"],[1,"status-icon"],["name","checkmark-circle","color","success",4,"ngIf"],["name","ellipse-outline","color","medium",4,"ngIf"],["name","checkmark-circle","color","success"],["name","ellipse-outline","color","medium"]],template:function(e,r){e&1&&(o(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),f(3,"Daily Tracker"),a()()(),o(4,"ion-content",1),d(5,"app-three-background",2),o(6,"div",3)(7,"ion-button",4),d(8,"ion-icon",5),a()(),o(9,"div",6)(10,"div",7)(11,"div",8),d(12,"ion-icon",9),o(13,"h1",10),f(14),a(),o(15,"p"),f(16,"DAY STREAK"),a()()(),o(17,"div",11)(18,"h3"),f(19,"This Week"),a(),o(20,"div",12),y(21,re,6,5,"div",13),a()()()()),e&2&&(l("translucent",!0),s(4),l("fullscreen",!0),s(),l("effect",r.currentEffect),s(9),v(r.currentStreak),s(7),l("ngForOf",r.weekProgress))},dependencies:[u,D,M,b,R,H,z,I,F,T,X],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:40px}.streak-circle-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.streak-circle[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;background:var(--ion-color-light);box-shadow:0 4px 15px #0000001a;display:flex;flex-direction:column;align-items:center;justify-content:center;border:4px solid var(--ion-color-warning)}.streak-circle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px;margin-bottom:-10px}.streak-circle[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:80px;font-weight:800;margin:0;color:var(--ion-text-color)}.streak-circle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;letter-spacing:2px;margin:0;color:var(--ion-color-medium);font-weight:700}.week-container[_ngcontent-%COMP%]{width:100%;background:var(--ion-color-white);border-radius:16px;padding:20px;box-shadow:0 2px 10px #0000000d}.week-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0;font-size:18px;margin-bottom:20px;font-weight:600}.week-grid[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.day-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.day-column[_ngcontent-%COMP%]   .day-label[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium);font-weight:600}.day-column[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}.streak-text[_ngcontent-%COMP%]{color:var(--ion-color-warning);font-size:80px;font-weight:800;margin:0}.day-column.today[_ngcontent-%COMP%]   .day-label[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]});let i=n;return i})();export{ge as HomePage};
