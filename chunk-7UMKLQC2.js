import{a as ci}from"./chunk-5OXG4TMC.js";import{a as J}from"./chunk-73NLLC7P.js";import{a as ti,b as N,c as ii,d as W,e as ni,f as Y,g as oi,h as ai,i as ri,k as si,l as li,m as U,n as Q,o as ee}from"./chunk-PDXCYWU5.js";import{a as K}from"./chunk-JWU5UMF6.js";import"./chunk-CQTJX6PO.js";import"./chunk-QUJFQN2Y.js";import"./chunk-5IBAPVH7.js";import"./chunk-JMSADOBL.js";import"./chunk-MSHXVBB7.js";import"./chunk-7FY2OE2O.js";import"./chunk-JXYYGUZK.js";import"./chunk-EDFG7ZPH.js";import"./chunk-N3T6NI5B.js";import"./chunk-MCSSOQW3.js";import{I as Yt,L as Ut,b as Wt,ha as Qt,la as Jt,oa as Kt,qa as Zt,sa as ei}from"./chunk-62L7SKDK.js";import{$ as at,A as Ge,Aa as Ot,Ba as Pt,Ca as Dt,D as qe,Da as Et,Ea as Tt,F as Be,Fa as Vt,Ga as Ht,H as Xe,Ha as Rt,I as $e,Ia as Ft,J as Ne,Ja as At,K as $,Ka as zt,La as Lt,M as We,Ma as jt,N as Ye,Na as Gt,O as Ue,Oa as qt,Pa as Bt,Q as Qe,Qa as Xt,R as Je,Ra as $t,Sa as Nt,T as Ke,U as Ze,V as et,X as tt,Y as it,Z as nt,_ as ot,a as M,aa as rt,b as Ce,ba as st,ca as lt,d as ye,da as ct,ea as dt,f as xe,fa as mt,g as we,ga as pt,h as Me,ha as ht,i as Se,ia as gt,j as Ie,ja as ut,k as ke,l as Oe,m as Pe,ma as ft,n as De,na as _t,o as Ee,p as Te,pa as vt,q as Ve,qa as bt,r as He,ra as Ct,s as Re,sa as yt,t as Fe,ta as xt,v as Ae,va as wt,wa as Mt,x as ze,xa as St,y as Le,ya as It,z as je,za as kt}from"./chunk-R2QO6RYX.js";import"./chunk-SCAGZU2L.js";import"./chunk-ZP6ROK2P.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-GK6NCVGY.js";import"./chunk-CKP3SGE2.js";import"./chunk-4JAQTSOB.js";import{$ as ie,Aa as E,C as s,Da as S,Db as G,E as f,Eb as q,G as y,Gb as B,Jb as _e,K as b,Kb as ve,Lb as be,Mb as X,P as p,Q as r,R as l,S as h,T as R,Ta as ce,U as F,Z as O,_ as u,aa as C,ea as ne,fa as oe,ga as ae,ha as re,ia as x,ka as d,la as w,ma as I,mb as A,na as se,nb as z,ob as L,qb as j,rb as de,sb as me,t as _,tb as pe,u as v,ua as le,ub as he,vb as ge,wb as ue,xb as fe,ya as P,za as D}from"./chunk-FBRAC5VV.js";import"./chunk-VJC7EZAS.js";import"./chunk-4FZP3PRC.js";import"./chunk-3YVIQ775.js";import"./chunk-7KXLFOKO.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-XO2KZLEH.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as k}from"./chunk-JHI3MBHO.js";function fi(o,a){if(o&1&&(r(0,"div",10),h(1,"ion-icon",11),r(2,"p"),d(3),l()()),o&2){let c=C().$implicit;s(),p("name",c.item.icon),s(2),w(c.item.name)}}function _i(o,a){o&1&&(r(0,"div",12),h(1,"ion-icon",13),l())}function vi(o,a){if(o&1&&(r(0,"div",6),h(1,"div",7),b(2,fi,4,2,"div",8)(3,_i,2,0,"div",9),l()),o&2){let c=a.$implicit,e=C();x("revealed",c.isRevealed)("inactive",e.animationComplete&&!c.isRevealed),p("ngClass",c.item?"rarity-"+c.item.rarity:"slot-empty"),s(2),p("ngIf",c.item),s(),p("ngIf",!c.item)}}function bi(o,a){if(o&1){let c=O();r(0,"div",14)(1,"ion-button",15),u("click",function(){_(c);let t=C();return v(t.claimAndClose())}),d(2),l()()}if(o&2){let c=C();s(2),I(" Collect All (",c.collectedItems.length,") ")}}var di=(()=>{let a=class a{constructor(e,t){this.modalCtrl=e,this.inventoryService=t,this.possibleRewards=[],this.gridSlots=[],this.collectedItems=[],this.animationComplete=!1,M({flame:$,checkmarkCircle:Re,ellipseOutline:Xe,closeCircleOutline:je,diamondOutline:Be,shieldOutline:It,flaskOutline:Ye,cashOutline:Ve,mapOutline:lt,hammerOutline:Je,keyOutline:nt,leafOutline:ot,skullOutline:Pt})}ngOnInit(){this.initializeGrid(),setTimeout(()=>{this.startWipeAnimation()},500)}initializeGrid(){let t=this.possibleRewards;this.collectedItems=t;let i=Array(9).fill(null);t.forEach((n,m)=>{m<9&&(i[m]=n)}),this.gridSlots=i.map(n=>({item:n,isRevealed:!1}))}startWipeAnimation(){let e=0;if(this.collectedItems.length===0){this.finishAnimation();return}let t=setInterval(()=>{this.gridSlots[e].isRevealed=!0,e++,e>=this.collectedItems.length&&(clearInterval(t),this.finishAnimation())},150)}finishAnimation(){this.animationComplete=!0,this.collectedItems.forEach(e=>{this.inventoryService.addItem(e)})}claimAndClose(){this.modalCtrl.dismiss({claimed:!0,rewards:this.collectedItems})}};a.\u0275fac=function(t){return new(t||a)(f(U),f(J))},a.\u0275cmp=y({type:a,selectors:[["app-reward-modal"]],inputs:{possibleRewards:"possibleRewards"},decls:7,vars:5,consts:[[1,"reward-content"],[1,"container"],[1,"title"],[1,"grid-container"],["class","grid-item",3,"revealed","inactive","ngClass",4,"ngFor","ngForOf"],["class","actions",4,"ngIf"],[1,"grid-item",3,"ngClass"],[1,"card-back"],["class","card-front",4,"ngIf"],["class","empty-slot",4,"ngIf"],[1,"card-front"],["size","large",3,"name"],[1,"empty-slot"],["name","close-circle-outline"],[1,"actions"],["expand","block","color","warning",3,"click"]],template:function(t,i){t&1&&(r(0,"ion-content",0)(1,"div",1)(2,"h2",2),d(3),l(),r(4,"div",3),b(5,vi,4,7,"div",4),l(),b(6,bi,3,1,"div",5),l()()),t&2&&(s(2),re("opacity",i.animationComplete?"1":"0.5"),s(),I(" ",i.animationComplete?"Loot Secured!":"Scanning..."," "),s(2),p("ngForOf",i.gridSlots),s(),p("ngIf",i.animationComplete))},dependencies:[S,P,D,E,Q,N,W,Y],styles:[".reward-content[_ngcontent-%COMP%]{--background: rgba(0, 0, 0, .9)}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.title[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px;font-size:1.5rem;text-transform:uppercase;letter-spacing:2px}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;width:100%;max-width:340px}.grid-item[_ngcontent-%COMP%]{aspect-ratio:1;background:#1a1a1a;border-radius:12px;position:relative;overflow:hidden;border:2px solid #333;box-shadow:inset 0 0 10px #000;transition:transform .2s}.grid-item.revealed[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{transform:translate(100%)}.grid-item.rarity-common[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]{border:2px solid var(--ion-color-success);box-shadow:0 0 10px var(--ion-color-success);color:var(--ion-color-success)}.grid-item.rarity-rare[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]{border:2px solid #9c27b0;box-shadow:0 0 10px #9c27b0;color:#ce93d8}.grid-item.rarity-legendary[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]{border:2px solid #ffd700;box-shadow:0 0 15px gold,inset 0 0 10px gold;color:gold;animation:_ngcontent-%COMP%_pulse-gold 2s infinite}.grid-item.inactive[_ngcontent-%COMP%]{opacity:.3;filter:grayscale(100%)}.card-back[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#383a3e,#2c2c2c);z-index:5;transition:transform .25s ease-out;border-right:1px solid rgba(255,255,255,.1)}.card-front[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#222;border-radius:10px}.card-front[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;font-size:.7rem;font-weight:700;text-align:center}.empty-slot[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;opacity:.2}.empty-slot[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2rem}@keyframes _ngcontent-%COMP%_pulse-gold{0%{box-shadow:0 0 15px gold}50%{box-shadow:0 0 25px gold}to{box-shadow:0 0 15px gold}}.actions[_ngcontent-%COMP%]{margin-top:30px;width:80%}"]});let o=a;return o})();function yi(o,a){o&1&&h(0,"ion-icon",16)}function xi(o,a){o&1&&h(0,"ion-icon",17)}function wi(o,a){o&1&&h(0,"ion-icon",18)}function Mi(o,a){o&1&&h(0,"ion-icon",19)}function Si(o,a){o&1&&h(0,"ion-icon",20)}function Ii(o,a){o&1&&h(0,"ion-icon",21)}var mi=(()=>{let a=class a{constructor(e){this.modalCtrl=e,this.selectedMood=null,M({close:Le,sadOutline:xt,sad:yt,happyOutline:Ze,happy:Ke})}close(e){return this.modalCtrl.dismiss(e)}confirm(){this.close(this.selectedMood)}};a.\u0275fac=function(t){return new(t||a)(f(B))},a.\u0275cmp=y({type:a,selectors:[["app-completion-modal"]],decls:31,vars:13,consts:[[1,"ion-no-border"],["slot","end"],[3,"click"],["name","close"],[1,"ion-padding","ion-text-center"],[1,"subtitle"],[1,"faces-container"],[1,"face-option",3,"click"],["name","sad-outline",4,"ngIf"],["name","sad","color","danger",4,"ngIf"],["name","happy-outline","style","transform: rotate(90deg);",4,"ngIf"],["name","happy","style","transform: rotate(90deg);","color","warning",4,"ngIf"],["name","happy-outline",4,"ngIf"],["name","happy","color","success",4,"ngIf"],[1,"confirm-btn"],["expand","block","shape","round",3,"click","disabled"],["name","sad-outline"],["name","sad","color","danger"],["name","happy-outline",2,"transform","rotate(90deg)"],["name","happy","color","warning",2,"transform","rotate(90deg)"],["name","happy-outline"],["name","happy","color","success"]],template:function(t,i){t&1&&(r(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"Great Job!"),l(),r(4,"ion-buttons",1)(5,"ion-button",2),u("click",function(){return i.close(null)}),h(6,"ion-icon",3),l()()()(),r(7,"ion-content",4)(8,"h3"),d(9,"How did it go?"),l(),r(10,"p",5),d(11,"Rate your experience to earn your loot."),l(),r(12,"div",6)(13,"div",7),u("click",function(){return i.selectedMood="sad"}),b(14,yi,1,0,"ion-icon",8)(15,xi,1,0,"ion-icon",9),r(16,"span"),d(17,"Hard"),l()(),r(18,"div",7),u("click",function(){return i.selectedMood="neutral"}),b(19,wi,1,0,"ion-icon",10)(20,Mi,1,0,"ion-icon",11),r(21,"span"),d(22,"Okay"),l()(),r(23,"div",7),u("click",function(){return i.selectedMood="happy"}),b(24,Si,1,0,"ion-icon",12)(25,Ii,1,0,"ion-icon",13),r(26,"span"),d(27,"Easy"),l()()(),r(28,"div",14)(29,"ion-button",15),u("click",function(){return i.confirm()}),d(30," Claim Loot "),l()()()),t&2&&(s(13),x("selected",i.selectedMood==="sad"),s(),p("ngIf",i.selectedMood!=="sad"),s(),p("ngIf",i.selectedMood==="sad"),s(3),x("selected",i.selectedMood==="neutral"),s(),p("ngIf",i.selectedMood!=="neutral"),s(),p("ngIf",i.selectedMood==="neutral"),s(3),x("selected",i.selectedMood==="happy"),s(),p("ngIf",i.selectedMood!=="happy"),s(),p("ngIf",i.selectedMood==="happy"),s(4),p("disabled",!i.selectedMood))},dependencies:[S,E,j,q,G,z,A,X,L],styles:[".subtitle[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.faces-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:40px}.face-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;opacity:.5;transition:all .2s;transform:scale(.9)}.face-option[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:50px}.face-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.face-option.selected[_ngcontent-%COMP%]{opacity:1;transform:scale(1.1)}.confirm-btn[_ngcontent-%COMP%]{margin-top:20px}"]});let o=a;return o})();var Oi=["rendererCanvas"],pi=(()=>{let a=class a{toggleEffect(){this.currentEffect=this.currentEffect==="stars"?"grid":"stars"}constructor(e){this.charService=e,this.clock=new Kt,this.animationId=0,this.spinSpeed=0,this.isDragging=!1,this.previousMouseX=0,this.rotationSpeed=.005,this.currentEffect="stars",le(()=>{let t=this.charService.loadout();this.scene&&(console.log("Signal detected change! Reloading..."),this.loadCustomCharacter(t))})}ngAfterViewInit(){this.initThree()}ngOnDestroy(){this.animationId&&cancelAnimationFrame(this.animationId),this.renderer&&this.renderer.dispose()}onStart(e){this.isDragging=!0,this.previousMouseX=e.clientX}onMove(e){this.handleInput(e.clientX)}onTouchStart(e){this.isDragging=!0,this.previousMouseX=e.touches[0].clientX}onTouchMove(e){this.handleInput(e.touches[0].clientX)}onEnd(){this.isDragging=!1}handleInput(e){if(!this.isDragging||!this.model)return;let t=e-this.previousMouseX;this.model.rotation.y+=t*this.rotationSpeed,this.previousMouseX=e}initThree(){let e=this.rendererCanvas.nativeElement.parentElement,t=e.clientWidth||300,i=e.clientHeight||400;this.scene=new Ut,this.camera=new Yt(45,t/i,.1,1e3),this.camera.position.set(0,-.25,4),this.renderer=new ei({canvas:this.rendererCanvas.nativeElement,antialias:!0,alpha:!0}),this.renderer.setSize(t,i);let n=new Qt(16777215,4473924,1.2);n.position.set(0,20,0),this.scene.add(n);let m=new Jt(16777215,1.5);m.position.set(3,10,10),this.scene.add(m),this.loadCustomCharacter(),this.animate()}loadCustomCharacter(e=null){this.model&&this.scene.remove(this.model);let t=e||this.charService.loadRaiderFromStorage();(!t||!t.base)&&(t={base:this.charService.ASSET_LIBRARY.base[0],hat:null,backpack:null,item:null});let i=this.charService.getAssetDetails("base",t.base);if(!i){console.error("Could not resolve base model");return}new ee().load(i.modelUrl,m=>{this.model=m.scene,this.model.scale.set(1,1,1),this.model.position.set(0,-1,0),this.scene.add(this.model),m.animations.length>0&&(this.mixer=new Zt(this.model),this.mixer.clipAction(m.animations[0]).play()),t.hat&&this.attachSmartAccessory("hat",t.hat,"mixamorigHead"),t.backpack&&this.attachSmartAccessory("backpack",t.backpack,"mixamorigSpine2"),t.item&&this.attachSmartAccessory("item",t.item,"mixamorigRightHand")})}attachSmartAccessory(e,t,i){let n=this.charService.getAssetDetails(e,t);if(!n)return;let m=this.model.getObjectByName(i);if(!m)return;new ee().load(n.modelUrl,T=>{let V=T.scene;V.traverse(H=>{H.isMesh&&(H.castShadow=!0,H.receiveShadow=!0,H.material&&(H.material.side=Wt))}),n.scale&&V.scale.setScalar(n.scale),n.rotation&&V.rotation.set(...n.rotation),n.offset&&V.position.set(...n.offset),m.add(V)})}animate(){this.animationId=requestAnimationFrame(()=>this.animate());let e=this.clock.getDelta();this.mixer&&this.mixer.update(e),this.model&&this.spinSpeed>.001?(this.model.rotation.y+=this.spinSpeed,this.spinSpeed*=.95):this.spinSpeed=0,this.renderer.render(this.scene,this.camera)}};a.\u0275fac=function(t){return new(t||a)(f(K))},a.\u0275cmp=y({type:a,selectors:[["app-character-model"]],viewQuery:function(t,i){if(t&1&&ne(Oi,5),t&2){let n;oe(n=ae())&&(i.rendererCanvas=n.first)}},decls:7,vars:3,consts:[["rendererCanvas",""],[1,"character-section"],[1,"three-canvas",3,"mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"],[1,"level-badge"],[1,"xp-badge"]],template:function(t,i){if(t&1){let n=O();R(0,"div",1)(1,"canvas",2,0),ie("mousedown",function(g){return _(n),v(i.onStart(g))})("mousemove",function(g){return _(n),v(i.onMove(g))})("mouseup",function(){return _(n),v(i.onEnd())})("mouseleave",function(){return _(n),v(i.onEnd())})("touchstart",function(g){return _(n),v(i.onTouchStart(g))})("touchmove",function(g){return _(n),v(i.onTouchMove(g))})("touchend",function(){return _(n),v(i.onEnd())}),F(),R(3,"div",3),d(4),F(),R(5,"div",4),d(6),F()()}t&2&&(s(4),I("Level ",i.charService.state.level),s(2),se("",i.charService.state.currentXp," / ",i.charService.state.maxXp," XP"))},styles:[".character-section[_ngcontent-%COMP%]{flex:1;height:30vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(to bottom,#4b4b4b,#000);position:relative;overflow:hidden;min-height:30vh}.character-section[_ngcontent-%COMP%]   .three-canvas[_ngcontent-%COMP%]{width:100%;height:100%;display:block;outline:none}.character-section[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);background:var(--ion-color-primary);color:#fff;padding:5px 15px;border-radius:20px;font-weight:700;z-index:10}.character-section[_ngcontent-%COMP%]   .xp-badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;align-items:center;gap:5px;background:#303030;padding:5px 12px;border-radius:20px;border:1px solid #4b60ff}.character-section[_ngcontent-%COMP%]   .xp-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#f57f17}"]});let o=a;return o})();function Pi(o,a){if(o&1&&(r(0,"div"),d(1),l()),o&2){let c=a.$implicit;s(),w(c)}}function Di(o,a){if(o&1&&(r(0,"div",19),b(1,Pi,2,1,"div",20),l()),o&2){let c=C();s(),p("ngForOf",c.weekDays)}}function Ei(o,a){if(o&1&&(r(0,"div",21)(1,"span"),d(2),l()()),o&2){let c=a.$implicit;x("empty",c.isEmpty)("completed",c.status==="completed")("missed",!c.isEmpty&&c.status==="missed")("today-border",c.isToday),s(2),w(c.label)}}var hi=(()=>{let a=class a{constructor(e){this.modalCtrl=e,this.segmentValue="month",this.currentViewDate=new Date,this.viewTitle="",this.gridSquares=[],this.weekDays=["S","M","T","W","T","F","S"],M({chevronBack:Fe,chevronForward:Ae})}ngOnInit(){this.updateView()}close(){this.modalCtrl.dismiss()}segmentChanged(e){this.segmentValue=e.detail.value,this.currentViewDate=new Date,this.updateView()}changeDate(e){let t=new Date(this.currentViewDate);this.segmentValue==="week"?t.setDate(t.getDate()+e*7):this.segmentValue==="month"?t.setMonth(t.getMonth()+e):this.segmentValue==="year"&&t.setFullYear(t.getFullYear()+e),this.currentViewDate=t,this.updateView()}updateView(){this.segmentValue==="week"?this.generateWeekGrid():this.segmentValue==="month"?this.generateMonthGrid():this.segmentValue==="year"&&this.generateYearGrid()}generateWeekGrid(){let e=new Date(this.currentViewDate),t=e.getDay();e.setDate(e.getDate()-t),this.viewTitle=`Week of ${e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`,this.gridSquares=[];for(let i=0;i<7;i++){let n=new Date(e);n.setDate(n.getDate()+i),this.pushDayToGrid(n)}}generateMonthGrid(){let e=this.currentViewDate.getFullYear(),t=this.currentViewDate.getMonth();this.viewTitle=this.currentViewDate.toLocaleDateString("en-US",{month:"long",year:"numeric"}),this.gridSquares=[];let n=new Date(e,t,1).getDay();for(let g=0;g<n;g++)this.gridSquares.push({isEmpty:!0});let m=new Date(e,t+1,0).getDate();for(let g=1;g<=m;g++){let T=new Date(e,t,g);this.pushDayToGrid(T)}}generateYearGrid(){let e=this.currentViewDate.getFullYear();this.viewTitle=`${e}`,this.gridSquares=[];let t=e%4===0&&e%100!==0||e%400===0?366:365;for(let i=0;i<t;i++){let n=new Date(e,0,1);n.setDate(n.getDate()+i),this.pushDayToGrid(n,!0)}}pushDayToGrid(e,t=!1){let i=e.toDateString(),n=this.habit.history.some(T=>T.date===i),m=i===new Date().toDateString(),g=n||m&&this.habit.completed;this.gridSquares.push({date:e,label:t?"":e.getDate(),status:g?"completed":"missed",isToday:m})}};a.\u0275fac=function(t){return new(t||a)(f(U))},a.\u0275cmp=y({type:a,selectors:[["app-habit-detail-modal"]],inputs:{habit:"habit"},decls:35,vars:6,consts:[["slot","end"],[3,"click"],[1,"ion-padding"],["mode","ios",1,"ion-margin-bottom",3,"ionChange","value"],["value","week"],["value","month"],["value","year"],[1,"calendar-nav"],["fill","clear",3,"click"],["name","chevron-back"],[1,"nav-title"],["name","chevron-forward"],["class","days-header",4,"ngIf"],[1,"heatmap-container",3,"ngClass"],["class","heatmap-square",3,"empty","completed","missed","today-border",4,"ngFor","ngForOf"],[1,"legend"],[1,"legend-item"],[1,"dot","green"],[1,"dot","grey"],[1,"days-header"],[4,"ngFor","ngForOf"],[1,"heatmap-square"]],template:function(t,i){t&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3),l(),r(4,"ion-buttons",0)(5,"ion-button",1),u("click",function(){return i.close()}),d(6,"Close"),l()()()(),r(7,"ion-content",2)(8,"ion-segment",3),u("ionChange",function(m){return i.segmentChanged(m)}),r(9,"ion-segment-button",4)(10,"ion-label"),d(11,"Week"),l()(),r(12,"ion-segment-button",5)(13,"ion-label"),d(14,"Month"),l()(),r(15,"ion-segment-button",6)(16,"ion-label"),d(17,"Year"),l()()(),r(18,"div",7)(19,"ion-button",8),u("click",function(){return i.changeDate(-1)}),h(20,"ion-icon",9),l(),r(21,"div",10),d(22),l(),r(23,"ion-button",8),u("click",function(){return i.changeDate(1)}),h(24,"ion-icon",11),l()(),b(25,Di,2,1,"div",12),r(26,"div",13),b(27,Ei,3,9,"div",14),l(),r(28,"div",15)(29,"div",16),h(30,"span",17),d(31," Done"),l(),r(32,"div",16),h(33,"span",18),d(34," Empty"),l()()()),t&2&&(s(3),w(i.habit.title),s(5),p("value",i.segmentValue),s(14),w(i.viewTitle),s(3),p("ngIf",i.segmentValue!=="year"),s(),p("ngClass",i.segmentValue),s(),p("ngForOf",i.gridSquares))},dependencies:[S,P,D,E,Q,N,ii,W,ni,Y,oi,ai,ri,si,li,ti],styles:[".calendar-nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;background:#1e1e1e;border-radius:12px;padding:5px}.calendar-nav[_ngcontent-%COMP%]   .nav-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#fff}.days-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-bottom:8px;text-align:center}.days-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#666}.heatmap-container[_ngcontent-%COMP%]{display:grid;gap:8px}.heatmap-container.week[_ngcontent-%COMP%], .heatmap-container.month[_ngcontent-%COMP%]{grid-template-columns:repeat(7,1fr)}.heatmap-container.year[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(12px,1fr));gap:4px}.heatmap-square[_ngcontent-%COMP%]{aspect-ratio:1;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:600;color:#888;background:#2a2a2a}.heatmap-square.empty[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.heatmap-square.completed[_ngcontent-%COMP%]{background:var(--ion-color-success);color:#fff;box-shadow:0 0 10px #2dd36f4d}.heatmap-square.today-border[_ngcontent-%COMP%]{border:2px solid white}.legend[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:24px;margin-top:30px;margin-bottom:10px}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;font-weight:500;color:#aaa}.dot[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:4px;display:block}.dot.green[_ngcontent-%COMP%]{background:var(--ion-color-success);box-shadow:0 0 6px #2dd36f66}.dot.grey[_ngcontent-%COMP%]{background:#2a2a2a;border:1px solid rgba(255,255,255,.05)}"]});let o=a;return o})();function Ti(o,a){if(o&1){let c=O();r(0,"ion-item-sliding")(1,"ion-item",9)(2,"ion-checkbox",10),u("ionChange",function(t){let i=_(c).$implicit,n=C();return v(n.onToggleHabit(t,i))}),l(),r(3,"div",11),h(4,"ion-icon",12),l(),r(5,"div",13),u("click",function(){let t=_(c).$implicit,i=C();return v(i.openHabitDetail(t))}),r(6,"ion-label")(7,"h2"),d(8),l(),r(9,"div",14),h(10,"ion-icon",15),r(11,"span"),d(12),l()()()(),r(13,"div",16),h(14,"ion-icon",12),r(15,"span"),d(16),l()()(),r(17,"ion-item-options",17)(18,"ion-item-option",18),u("click",function(){let t=_(c).$implicit,i=C();return v(i.deleteHabit(t))}),h(19,"ion-icon",19),l()()()}if(o&2){let c=a.$implicit,e=C();s(),x("rarity-low",c.reward==="low")("rarity-medium",c.reward==="medium")("rarity-high",c.reward==="high"),s(),p("checked",c.completed),s(2),p("name",c.icon),s(4),w(c.title),s(4),I("",c.streak," Days"),s(),p("ngClass",c.associatedStat),s(),p("name",e.getStatIcon(c.associatedStat)),s(2),w(c.associatedStat)}}var pn=(()=>{let a=class a{constructor(e,t,i,n,m,g){this.modalCtrl=e,this.habitService=t,this.toastCtrl=i,this.inventoryService=n,this.alertCtrl=m,this.charService=g,this.habits=[],M({settingsOutline:Mt}),M({water:Xt,barbell:xe,book:ke,bed:Me,bicycle:Ie,briefcase:Oe,gameController:Ue,fastFood:$e,musicalNotes:pt,paw:ht,sunny:Vt,moon:mt,alarm:ye,cart:Te,cafe:Pe,medkit:ct,school:wt,trash:At,skull:Ot,trophy:zt,rocket:bt,rose:Ct,fitness:Ne,flask:We,hammer:Qe,heart:et,hourglass:tt,key:it,library:at,mail:rt,map:st,mic:dt,pencil:gt,people:ut,pizza:ft,planet:_t,restaurant:vt,shapes:St,shirt:kt,sparkles:Dt,star:Et,storefront:Tt,terminal:Ht,thumbsUp:Rt,timer:Ft,tv:Lt,umbrella:jt,videocam:Gt,walk:qt,wallet:Bt,wifi:$t,wine:Nt,accessibility:Ce,basket:we,beer:Se,camera:De,car:Ee,chatbubble:He,clipboard:ze,colorPalette:Ge,desktop:qe,flame:$})}ionViewDidEnter(){this.habitService.checkDateAndReset(),this.habits=this.habitService.getHabits()}openReward(){return k(this,null,function*(){let e=this.inventoryService.getRandomItems(1,5);console.log("Generated Loot Pool:",e);let t=yield this.modalCtrl.create({component:di,componentProps:{possibleRewards:e},cssClass:"my-custom-modal-css",backdropDismiss:!1});yield t.present();let{data:i}=yield t.onDidDismiss();i?.claimed&&i?.reward&&(console.log("User collected:",i.reward),this.inventoryService.addItem(i.reward),(yield this.toastCtrl.create({message:`Collected ${i.reward.name}!`,duration:2e3,color:"success",position:"top"})).present())})}openHabitDetail(e){return k(this,null,function*(){return yield(yield this.modalCtrl.create({component:hi,componentProps:{habit:e}})).present()})}deleteHabit(e){return k(this,null,function*(){yield(yield this.alertCtrl.create({header:"Delete Habit?",message:`Are you sure you want to remove "${e.title}"?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:()=>{this.habitService.deleteHabit(e.id),this.refreshData(),this.showToast("Habit deleted")}}]})).present()})}getStatIcon(e){switch(e){case"strength":return"barbell";case"intelligence":return"book";case"constitution":return"heart";case"dexterity":return"flash";case"charisma":return"chatbubble";default:return"help-circle"}}getStatLabel(e){return e?e.substring(0,3).toUpperCase():""}showToast(e){return k(this,null,function*(){(yield this.toastCtrl.create({message:e,duration:1500,position:"bottom"})).present()})}onToggleHabit(e,t){return k(this,null,function*(){if(!e.detail.checked){this.habitService.uncompleteHabit(t.id),this.charService.modifyStat(t.associatedStat,t.difficulty,!0),this.refreshData();return}t.completed=!1;let n=yield this.modalCtrl.create({component:mi,breakpoints:[0,.5,.8],initialBreakpoint:.5,cssClass:"custom-modal"});yield n.present();let{data:m}=yield n.onWillDismiss();m?(this.habitService.completeHabit(t.id,m),this.charService.notifyHabitComplete(t.streak),this.charService.modifyStat(t.associatedStat,t.difficulty,!1),this.openReward(),this.refreshData()):this.refreshData()})}refreshData(){this.habits=this.habitService.getHabits()}};a.\u0275fac=function(t){return new(t||a)(f(B),f(ci),f(ve),f(J),f(_e),f(K))},a.\u0275cmp=y({type:a,selectors:[["app-dashboard"]],decls:17,vars:2,consts:[[1,"ion-no-border"],["slot","start"],["slot","end"],["name","settings-outline"],["scrollY","false",3,"fullscreen"],[1,"split-layout"],[1,"habits-section"],["lines","none",1,"habit-list"],[4,"ngFor","ngForOf"],[1,"habit-item"],["slot","start",3,"ionChange","checked"],["slot","start",1,"habit-icon-circle"],[3,"name"],[1,"content-wrapper",2,"flex","1","display","flex","align-items","center",3,"click"],[1,"streak-chip"],["name","flame"],[1,"stat-chip",3,"ngClass"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(t,i){t&1&&(r(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),h(3,"ion-menu-button"),l(),r(4,"ion-title"),d(5,"ARC Runners"),l(),r(6,"ion-buttons",2)(7,"ion-button"),h(8,"ion-icon",3),l()()()(),r(9,"ion-content",4)(10,"div",5),h(11,"app-character-model"),r(12,"div",6)(13,"h3"),d(14,"Today's Quests"),l(),r(15,"ion-list",7),b(16,Ti,20,13,"ion-item-sliding",8),l()()()()),t&2&&(s(9),p("fullscreen",!0),s(7),p("ngForOf",i.habits))},dependencies:[S,P,D,ce,pi,L,j,G,q,z,fe,A,X,ue,de,ge,be,he,pe,me],styles:[".split-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden}.habits-section[_ngcontent-%COMP%]{overflow-y:auto;-webkit-overflow-scrolling:touch;flex:1;background:#000;border-top-left-radius:30px;border-top-right-radius:30px;box-shadow:0 -5px 20px #0000000d;padding:20px 20px 100px;margin-top:-20px;z-index:10}.habit-item[_ngcontent-%COMP%]{margin-bottom:0;--border-radius: 12px;border-radius:12px;--color: white}.habit-item.rarity-low[_ngcontent-%COMP%]{--background: #37474f;border:1px solid #546e7a}.habit-item.rarity-medium[_ngcontent-%COMP%]{--background: #1565c0;border:1px solid #42a5f5}.habit-item.rarity-high[_ngcontent-%COMP%]{--background: #5d144b;border:1px solid #ff00e6}ion-item-sliding[_ngcontent-%COMP%]{margin-bottom:12px;background:transparent;border-radius:12px}.habit-list[_ngcontent-%COMP%]{border-radius:10px}.streak-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;background:#fff3;padding:4px 10px;border-radius:20px;margin-top:6px;width:fit-content}.streak-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;color:#ffca28}.streak-chip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#fff;letter-spacing:.5px}.meta-row[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:6px}.stat-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;border-radius:6px;font-size:10px;font-weight:800;letter-spacing:.5px;background:#0003;color:#fff;border:1px solid rgba(255,255,255,.1)}.stat-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.stat-chip.strength[_ngcontent-%COMP%]{background:#f4433633;color:#ff8a80;border-color:#f44336}.stat-chip.intelligence[_ngcontent-%COMP%]{background:#2196f333;color:#90caf9;border-color:#2196f3}.stat-chip.constitution[_ngcontent-%COMP%]{background:#4caf5033;color:#a5d6a7;border-color:#4caf50}.stat-chip.dexterity[_ngcontent-%COMP%]{background:#ff980033;color:#ffcc80;border-color:#ff9800}.stat-chip.charisma[_ngcontent-%COMP%]{background:#9c27b033;color:#ce93d8;border-color:#9c27b0}.streak-chip[_ngcontent-%COMP%]{height:fit-content}"]});let o=a;return o})();export{pn as DashboardPage};
