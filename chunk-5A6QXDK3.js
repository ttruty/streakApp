import{m as c}from"./chunk-K64DFS7A.js";import{a as s,b as m}from"./chunk-JHI3MBHO.js";var h=(()=>{let o=class o{constructor(){this.STORAGE_KEY="user_inventory",this.GOLD_KEY="user_gold",this.LOOT_TABLE={gold_coin:{id:"gold_coin",name:"Gold Coin",icon:"cash-outline",type:"material",description:"Currency.",sellValue:1,rarity:"common",quantity:1},diamond:{id:"diamond",name:"Diamond",icon:"diamond-outline",type:"material",description:"Sparkling gem.",sellValue:100,rarity:"legendary",quantity:1},potion:{id:"potion",name:"Potion",icon:"flask-outline",type:"consumable",description:"Restores health.",sellValue:15,rarity:"rare",quantity:1},shield:{id:"shield",name:"Shield",icon:"shield-outline",type:"equipment",description:"Protection.",sellValue:10,rarity:"common",quantity:1},hammer:{id:"hammer",name:"Iron Hammer",icon:"hammer-outline",type:"equipment",description:"Good for smashing.",sellValue:20,rarity:"common",quantity:1},key:{id:"key",name:"Mystery Key",icon:"key-outline",type:"material",description:"Opens something...",sellValue:50,rarity:"rare",quantity:1},map:{id:"map",name:"Old Map",icon:"map-outline",type:"consumable",description:"Reveals secrets.",sellValue:5,rarity:"common",quantity:1},herb:{id:"herb",name:"Magic Herb",icon:"leaf-outline",type:"material",description:"Medicinal plant.",sellValue:2,rarity:"common",quantity:1},skull:{id:"skull",name:"Cursed Skull",icon:"skull-outline",type:"material",description:"Spooky vibes.",sellValue:200,rarity:"legendary",quantity:1}}}getInventory(){let t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):[]}getGold(){return parseInt(localStorage.getItem(this.GOLD_KEY)||"0",10)}addGold(t){let i=this.getGold();localStorage.setItem(this.GOLD_KEY,(i+t).toString())}addItem(t){let i=this.getInventory(),n=i.find(e=>e.id===t.id);n?n.quantity+=t.quantity:i.push(t),this.saveInventory(i)}removeItem(t,i=1){let n=this.getInventory(),e=n.findIndex(a=>a.id===t);e>-1&&(n[e].quantity-=i,n[e].quantity<=0&&n.splice(e,1),this.saveInventory(n))}generateLoot(t){let i=t==="high"?100:t==="medium"?50:10;this.addGold(i);let n=Math.random(),e=null;return n>.5&&(t==="low"&&(e=this.LOOT_TABLE.potion),t==="medium"&&(e=this.LOOT_TABLE.gem),t==="high"&&(e=this.LOOT_TABLE.sword)),e?(this.addItem(m(s({},e),{quantity:1})),{gold:i,item:e.name}):{gold:i,item:null}}saveInventory(t){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}getRandomItems(t,i){let n=Math.floor(Math.random()*(i-t+1))+t,e=[],a=Object.keys(this.LOOT_TABLE);for(let d=0;d<n;d++){let u=a[Math.floor(Math.random()*a.length)],l=s({},this.LOOT_TABLE[u]);l.id=l.id+"_"+Math.random().toString(36).substr(2,9),e.push(l)}return e}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();export{h as a};
