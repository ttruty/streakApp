import{a as X,b as Z}from"./chunk-LKYU66QY.js";import{Ba as R,C as F,E as z,F as A,Ja as W,K as N,M as U,N as G,R as H,S as Y,Z as B,_ as L,a as j,ca as J,oa as K,q,ya as Q}from"./chunk-CDGEBSJV.js";import{Aa as S,C as r,Da as M,E as m,Eb as D,Fb as E,G as x,Jb as T,K as g,Lb as V,Nb as $,P as s,Q as t,R as l,S as f,Z as _,_ as C,aa as u,ja as I,ka as d,la as v,ma as b,nb as P,ob as w,qb as k,t as h,u as y,za as O}from"./chunk-7WHQ53J5.js";import"./chunk-PGVWJ64G.js";import"./chunk-YG7LLWQI.js";import"./chunk-3ZMQLOZX.js";import"./chunk-QUPCUN75.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-663TVV7P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as p}from"./chunk-JHI3MBHO.js";function te(n,o){n&1&&(t(0,"div",8),f(1,"ion-icon",9),t(2,"h3"),d(3,"No Items Yet"),l(),t(4,"p"),d(5,"Complete habits to earn loot!"),l()())}function ne(n,o){if(n&1&&(t(0,"div",14),d(1),l()),n&2){let a=u().$implicit;r(),v(a.quantity)}}function ie(n,o){if(n&1){let a=_();t(0,"div",10),C("click",function(){let i=h(a).$implicit,c=u();return y(c.openItemOptions(i))}),g(1,ne,2,1,"div",11),f(2,"ion-icon",12),t(3,"div",13),d(4),l()()}if(n&2){let a=o.$implicit;I(a.rarity),r(),s("ngIf",a.quantity>1),r(),s("name",a.icon),r(2),v(a.name)}}var ge=(()=>{let o=class o{constructor(e,i,c,ee){this.inventoryService=e,this.actionSheetCtrl=i,this.toastCtrl=c,this.achievementService=ee,this.items=[],this.gold=0,j({cubeOutline:F,cashOutline:q,flask:U,diamond:z,flame:N,trash:W,handLeft:Y,pricetag:K,diamondOutline:A,keyOutline:B,shieldOutline:Q,hammerOutline:H,leafOutline:L,skullOutline:R,mapOutline:J,flaskOutline:G})}ionViewDidEnter(){this.loadData(),this.achievementService.notifyInventoryUpdate(this.items)}loadData(){this.items=this.inventoryService.getInventory(),this.gold=this.inventoryService.getGold()}openItemOptions(e){return p(this,null,function*(){yield(yield this.actionSheetCtrl.create({header:e.name,subHeader:e.description,buttons:[{text:"Use Item",icon:"hand-left",handler:()=>{this.useItem(e)}},{text:`Sell for ${e.sellValue}g`,icon:"pricetag",handler:()=>{this.sellItem(e)}},{text:"Drop",icon:"trash",role:"destructive",handler:()=>{this.inventoryService.removeItem(e.id,1),this.loadData()}},{text:"Cancel",role:"cancel"}]})).present()})}useItem(e){return p(this,null,function*(){if(e.type!=="consumable"){(yield this.toastCtrl.create({message:"You cannot use this item right now.",duration:2e3,color:"warning"})).present();return}this.inventoryService.removeItem(e.id,1),this.loadData(),(yield this.toastCtrl.create({message:`Used ${e.name}! Effect Applied.`,duration:2e3,color:"success"})).present()})}sellItem(e){return p(this,null,function*(){this.inventoryService.removeItem(e.id,1),this.inventoryService.addGold(e.sellValue),this.loadData(),(yield this.toastCtrl.create({message:`Sold ${e.name} for ${e.sellValue}g`,duration:2e3,color:"warning"})).present()})}};o.\u0275fac=function(i){return new(i||o)(m(X),m(T),m(V),m(Z))},o.\u0275cmp=x({type:o,selectors:[["app-inventory"]],decls:13,vars:5,consts:[[1,"ion-no-border",3,"translucent"],["slot","end"],[1,"gold-badge"],["name","cash-outline","color","warning"],[1,"ion-padding",3,"fullscreen"],["class","empty-state",4,"ngIf"],[1,"inventory-grid"],["class","item-card",3,"class","click",4,"ngFor","ngForOf"],[1,"empty-state"],["name","cube-outline"],[1,"item-card",3,"click"],["class","quantity-badge",4,"ngIf"],[3,"name"],[1,"item-name"],[1,"quantity-badge"]],template:function(i,c){i&1&&(t(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"Inventory"),l(),t(4,"ion-buttons",1)(5,"div",2),f(6,"ion-icon",3),t(7,"span"),d(8),l()()()()(),t(9,"ion-content",4),g(10,te,6,0,"div",5),t(11,"div",6),g(12,ie,5,5,"div",7),l()()),i&2&&(s("translucent",!0),r(8),b("",c.gold,"g"),r(),s("fullscreen",!0),r(),s("ngIf",c.items.length===0),r(2),s("ngForOf",c.items))},dependencies:[M,O,S,k,E,D,w,P,$],styles:[".gold-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;background:#fff8e1;padding:5px 12px;border-radius:20px;border:1px solid #fbc02d;margin-right:10px}.gold-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#f57f17}.empty-state[_ngcontent-%COMP%]{text-align:center;margin-top:50px;color:#999}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:60px;margin-bottom:10px}.inventory-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:15px}.item-card[_ngcontent-%COMP%]{aspect-ratio:1;background:#fff;border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;box-shadow:0 4px 10px #a5a5a50d;border:2px solid transparent;cursor:pointer;transition:transform .1s}.item-card[_ngcontent-%COMP%]:active{transform:scale(.95)}.item-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:5px;color:#555}.item-card[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:10px;text-align:center;font-weight:600;line-height:1.2;padding:0 5px}.item-card[_ngcontent-%COMP%]   .quantity-badge[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;background:var(--ion-color-dark);color:#01f;font-size:10px;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700}.item-card.common[_ngcontent-%COMP%]{border-color:#e0e0e0;background:#56b04e}.item-card.rare[_ngcontent-%COMP%]{border-color:#d3e9fb;background:#25a4ff}.item-card.rare[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#1565c0}.item-card.legendary[_ngcontent-%COMP%]{border-color:#ffe9c8;background:#ffd28a}.item-card.legendary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#e65100}"]});let n=o;return n})();export{ge as InventoryPage};
