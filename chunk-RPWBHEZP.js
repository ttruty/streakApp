import{a as R}from"./chunk-RPWRIK73.js";import{a as W}from"./chunk-7IG7GJJB.js";import{B as z,C as N,Ea as Q,H as U,J as A,O as G,P as H,W as Y,X as B,a as j,ka as L,p as q,ta as J,wa as K,z as F}from"./chunk-MDAS65HY.js";import{A as r,Ab as E,C as m,E as x,Eb as T,Gb as V,I as g,Ib as $,N as l,O as t,P as s,Q as f,W as _,X as C,Z as u,ga as I,ha as d,ia as v,ja as b,jb as P,kb as w,mb as k,t as h,u as y,va as O,wa as S,za as M,zb as D}from"./chunk-33AMBPXS.js";import"./chunk-VJC7EZAS.js";import"./chunk-4FZP3PRC.js";import"./chunk-3YVIQ775.js";import"./chunk-7KXLFOKO.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-XO2KZLEH.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as p}from"./chunk-JHI3MBHO.js";function Z(n,o){n&1&&(t(0,"div",8),f(1,"ion-icon",9),t(2,"h3"),d(3,"No Items Yet"),s(),t(4,"p"),d(5,"Complete habits to earn loot!"),s()())}function ee(n,o){if(n&1&&(t(0,"div",14),d(1),s()),n&2){let a=u().$implicit;r(),v(a.quantity)}}function te(n,o){if(n&1){let a=_();t(0,"div",10),C("click",function(){let i=h(a).$implicit,c=u();return y(c.openItemOptions(i))}),g(1,ee,2,1,"div",11),f(2,"ion-icon",12),t(3,"div",13),d(4),s()()}if(n&2){let a=o.$implicit;I(a.rarity),r(),l("ngIf",a.quantity>1),r(),l("name",a.icon),r(2),v(a.name)}}var me=(()=>{let o=class o{constructor(e,i,c,X){this.inventoryService=e,this.actionSheetCtrl=i,this.toastCtrl=c,this.charService=X,this.items=[],this.gold=0,j({cubeOutline:F,cashOutline:q,flask:A,diamond:z,flame:U,trash:Q,handLeft:H,pricetag:L,diamondOutline:N,keyOutline:Y,shieldOutline:J,hammerOutline:G,leafOutline:B,skullOutline:K})}ionViewDidEnter(){this.loadData(),this.charService.notifyInventoryUpdate(this.items)}loadData(){this.items=this.inventoryService.getInventory(),this.gold=this.inventoryService.getGold()}openItemOptions(e){return p(this,null,function*(){yield(yield this.actionSheetCtrl.create({header:e.name,subHeader:e.description,buttons:[{text:"Use Item",icon:"hand-left",handler:()=>{this.useItem(e)}},{text:`Sell for ${e.sellValue}g`,icon:"pricetag",handler:()=>{this.sellItem(e)}},{text:"Drop",icon:"trash",role:"destructive",handler:()=>{this.inventoryService.removeItem(e.id,1),this.loadData()}},{text:"Cancel",role:"cancel"}]})).present()})}useItem(e){return p(this,null,function*(){if(e.type!=="consumable"){(yield this.toastCtrl.create({message:"You cannot use this item right now.",duration:2e3,color:"warning"})).present();return}this.inventoryService.removeItem(e.id,1),this.loadData(),(yield this.toastCtrl.create({message:`Used ${e.name}! Effect Applied.`,duration:2e3,color:"success"})).present()})}sellItem(e){return p(this,null,function*(){this.inventoryService.removeItem(e.id,1),this.inventoryService.addGold(e.sellValue),this.loadData(),(yield this.toastCtrl.create({message:`Sold ${e.name} for ${e.sellValue}g`,duration:2e3,color:"warning"})).present()})}};o.\u0275fac=function(i){return new(i||o)(m(R),m(T),m(V),m(W))},o.\u0275cmp=x({type:o,selectors:[["app-inventory"]],decls:13,vars:5,consts:[[1,"ion-no-border",3,"translucent"],["slot","end"],[1,"gold-badge"],["name","cash-outline","color","warning"],[1,"ion-padding",3,"fullscreen"],["class","empty-state",4,"ngIf"],[1,"inventory-grid"],["class","item-card",3,"class","click",4,"ngFor","ngForOf"],[1,"empty-state"],["name","cube-outline"],[1,"item-card",3,"click"],["class","quantity-badge",4,"ngIf"],[3,"name"],[1,"item-name"],[1,"quantity-badge"]],template:function(i,c){i&1&&(t(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"Inventory"),s(),t(4,"ion-buttons",1)(5,"div",2),f(6,"ion-icon",3),t(7,"span"),d(8),s()()()()(),t(9,"ion-content",4),g(10,Z,6,0,"div",5),t(11,"div",6),g(12,te,5,5,"div",7),s()()),i&2&&(l("translucent",!0),r(8),b("",c.gold,"g"),r(),l("fullscreen",!0),r(),l("ngIf",c.items.length===0),r(2),l("ngForOf",c.items))},dependencies:[M,O,S,k,E,D,w,P,$],styles:[".gold-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;background:#fff8e1;padding:5px 12px;border-radius:20px;border:1px solid #fbc02d;margin-right:10px}.gold-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#f57f17}.empty-state[_ngcontent-%COMP%]{text-align:center;margin-top:50px;color:#999}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:60px;margin-bottom:10px}.inventory-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:15px}.item-card[_ngcontent-%COMP%]{aspect-ratio:1;background:#fff;border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;box-shadow:0 4px 10px #a5a5a50d;border:2px solid transparent;cursor:pointer;transition:transform .1s}.item-card[_ngcontent-%COMP%]:active{transform:scale(.95)}.item-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:5px;color:#555}.item-card[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:10px;text-align:center;font-weight:600;line-height:1.2;padding:0 5px}.item-card[_ngcontent-%COMP%]   .quantity-badge[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;background:var(--ion-color-dark);color:#01f;font-size:10px;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700}.item-card.common[_ngcontent-%COMP%]{border-color:#e0e0e0;background:#56b04e}.item-card.rare[_ngcontent-%COMP%]{border-color:#d3e9fb;background:#25a4ff}.item-card.rare[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#1565c0}.item-card.legendary[_ngcontent-%COMP%]{border-color:#ffe9c8;background:#ffd28a}.item-card.legendary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#e65100}"]});let n=o;return n})();export{me as InventoryPage};
