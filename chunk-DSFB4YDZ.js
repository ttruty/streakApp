import{a as Nt,b as Qt}from"./chunk-SCSCFCIQ.js";import{a as Jt}from"./chunk-UJLYQUWO.js";import{a as U,b as At,c as Rt,d as Lt,e as jt,f as qt,g as zt,h as Bt,i as Gt,j as Xt,l as Yt,m as $t,n as Ut,o as Wt,p as $}from"./chunk-E6YRCRJE.js";import{b as Kt}from"./chunk-LKYU66QY.js";import"./chunk-CQTJX6PO.js";import"./chunk-QUJFQN2Y.js";import"./chunk-5IBAPVH7.js";import"./chunk-JMSADOBL.js";import"./chunk-MSHXVBB7.js";import"./chunk-7FY2OE2O.js";import"./chunk-JXYYGUZK.js";import"./chunk-EDFG7ZPH.js";import"./chunk-N3T6NI5B.js";import"./chunk-MCSSOQW3.js";import{I as Tt,L as Et,b as Dt,ha as Ot,la as Pt,oa as Vt,qa as Ht,sa as Ft}from"./chunk-62L7SKDK.js";import{$ as Ge,A as Ee,Aa as dt,Ca as mt,D as Oe,Da as pt,Ea as ht,Fa as ut,Ga as gt,Ha as ft,I as Pe,Ia as _t,J as Ve,Ja as bt,K as He,Ka as vt,La as Ct,M as Fe,Ma as yt,Na as xt,O as Ae,Q as Re,Ra as Mt,Sa as wt,T as Le,Ta as St,U as je,Ua as kt,V as qe,Va as It,X as ze,Y as Be,a as D,aa as Xe,b as pe,ba as Ye,d as he,da as $e,ea as Ue,f as ue,fa as We,g as ge,ga as Ne,h as fe,ha as Qe,i as _e,ia as Je,j as be,ja as Ke,k as ve,l as Ce,m as ye,ma as Ze,n as xe,na as et,o as Me,p as we,pa as tt,qa as nt,r as Se,ra as it,sa as ot,t as ke,ta as at,v as Ie,va as rt,wa as st,x as De,xa as lt,y as Te,za as ct}from"./chunk-CDGEBSJV.js";import"./chunk-SCAGZU2L.js";import"./chunk-ZP6ROK2P.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-GK6NCVGY.js";import"./chunk-CKP3SGE2.js";import"./chunk-4JAQTSOB.js";import{$ as N,Aa as R,C as l,Da as T,E as f,Eb as B,Fb as G,G as y,Hb as X,Ia as ee,K as v,Kb as ce,Lb as de,Mb as me,Nb as Y,P as p,Q as o,R as s,S as h,T as E,Ta as te,U as O,Z as P,_ as g,aa as I,ea as Q,fa as J,ga as K,ia as x,ka as d,la as M,ma as V,mb as L,na as Z,nb as j,ob as q,qb as z,rb as ne,sb as ie,t as _,tb as oe,u as b,ua as H,ub as ae,vb as re,wb as se,ya as F,yb as le,za as A}from"./chunk-7WHQ53J5.js";import"./chunk-PGVWJ64G.js";import"./chunk-YG7LLWQI.js";import"./chunk-3ZMQLOZX.js";import"./chunk-QUPCUN75.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-663TVV7P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as k}from"./chunk-JHI3MBHO.js";function an(r,a){r&1&&h(0,"ion-icon",16)}function rn(r,a){r&1&&h(0,"ion-icon",17)}function sn(r,a){r&1&&h(0,"ion-icon",18)}function ln(r,a){r&1&&h(0,"ion-icon",19)}function cn(r,a){r&1&&h(0,"ion-icon",20)}function dn(r,a){r&1&&h(0,"ion-icon",21)}var en=(()=>{let a=class a{constructor(e){this.modalCtrl=e,this.selectedMood=null,D({close:Te,sadOutline:at,sad:ot,happyOutline:je,happy:Le})}close(e){return this.modalCtrl.dismiss(e)}confirm(){this.close(this.selectedMood)}};a.\u0275fac=function(t){return new(t||a)(f(X))},a.\u0275cmp=y({type:a,selectors:[["app-completion-modal"]],decls:31,vars:13,consts:[[1,"ion-no-border"],["slot","end"],[3,"click"],["name","close"],[1,"ion-padding","ion-text-center"],[1,"subtitle"],[1,"faces-container"],[1,"face-option",3,"click"],["name","sad-outline",4,"ngIf"],["name","sad","color","danger",4,"ngIf"],["name","happy-outline","style","transform: rotate(90deg);",4,"ngIf"],["name","happy","style","transform: rotate(90deg);","color","warning",4,"ngIf"],["name","happy-outline",4,"ngIf"],["name","happy","color","success",4,"ngIf"],[1,"confirm-btn"],["expand","block","shape","round",3,"click","disabled"],["name","sad-outline"],["name","sad","color","danger"],["name","happy-outline",2,"transform","rotate(90deg)"],["name","happy","color","warning",2,"transform","rotate(90deg)"],["name","happy-outline"],["name","happy","color","success"]],template:function(t,n){t&1&&(o(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"Great Job!"),s(),o(4,"ion-buttons",1)(5,"ion-button",2),g("click",function(){return n.close(null)}),h(6,"ion-icon",3),s()()()(),o(7,"ion-content",4)(8,"h3"),d(9,"How did it go?"),s(),o(10,"p",5),d(11,"Rate your experience to earn your loot."),s(),o(12,"div",6)(13,"div",7),g("click",function(){return n.selectedMood="sad"}),v(14,an,1,0,"ion-icon",8)(15,rn,1,0,"ion-icon",9),o(16,"span"),d(17,"Hard"),s()(),o(18,"div",7),g("click",function(){return n.selectedMood="neutral"}),v(19,sn,1,0,"ion-icon",10)(20,ln,1,0,"ion-icon",11),o(21,"span"),d(22,"Okay"),s()(),o(23,"div",7),g("click",function(){return n.selectedMood="happy"}),v(24,cn,1,0,"ion-icon",12)(25,dn,1,0,"ion-icon",13),o(26,"span"),d(27,"Easy"),s()()(),o(28,"div",14)(29,"ion-button",15),g("click",function(){return n.confirm()}),d(30," Claim Loot "),s()()()),t&2&&(l(13),x("selected",n.selectedMood==="sad"),l(),p("ngIf",n.selectedMood!=="sad"),l(),p("ngIf",n.selectedMood==="sad"),l(3),x("selected",n.selectedMood==="neutral"),l(),p("ngIf",n.selectedMood!=="neutral"),l(),p("ngIf",n.selectedMood==="neutral"),l(3),x("selected",n.selectedMood==="happy"),l(),p("ngIf",n.selectedMood!=="happy"),l(),p("ngIf",n.selectedMood==="happy"),l(4),p("disabled",!n.selectedMood))},dependencies:[T,R,z,G,B,j,L,Y,q],styles:[".subtitle[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.faces-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:40px}.face-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;opacity:.5;transition:all .2s;transform:scale(.9)}.face-option[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:50px}.face-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.face-option.selected[_ngcontent-%COMP%]{opacity:1;transform:scale(1.1)}.confirm-btn[_ngcontent-%COMP%]{margin-top:20px}"]});let r=a;return r})();var pn=["rendererCanvas"],tn=(()=>{let a=class a{toggleEffect(){this.currentEffect=this.currentEffect==="stars"?"grid":"stars"}constructor(e){this.charService=e,this.clock=new Vt,this.animationId=0,this.spinSpeed=0,this.isDragging=!1,this.previousMouseX=0,this.rotationSpeed=.005,this.currentEffect="stars",H(()=>{let t=this.charService.loadout();this.scene&&(console.log("Signal detected change! Reloading..."),this.loadCustomCharacter(t))})}ngAfterViewInit(){this.initThree()}ngOnDestroy(){this.animationId&&cancelAnimationFrame(this.animationId),this.renderer&&this.renderer.dispose()}onStart(e){this.isDragging=!0,this.previousMouseX=e.clientX}onMove(e){this.handleInput(e.clientX)}onTouchStart(e){this.isDragging=!0,this.previousMouseX=e.touches[0].clientX}onTouchMove(e){this.handleInput(e.touches[0].clientX)}onEnd(){this.isDragging=!1}handleInput(e){if(!this.isDragging||!this.model)return;let t=e-this.previousMouseX;this.model.rotation.y+=t*this.rotationSpeed,this.previousMouseX=e}initThree(){let e=this.rendererCanvas.nativeElement.parentElement,t=e.clientWidth||300,n=e.clientHeight||400;this.scene=new Et,this.camera=new Tt(45,t/n,.1,1e3),this.camera.position.set(0,-.25,4),this.renderer=new Ft({canvas:this.rendererCanvas.nativeElement,antialias:!0,alpha:!0}),this.renderer.setSize(t,n);let i=new Ot(16777215,4473924,1.2);i.position.set(0,20,0),this.scene.add(i);let c=new Pt(16777215,1.5);c.position.set(3,10,10),this.scene.add(c),this.loadCustomCharacter(),this.animate()}loadCustomCharacter(e=null){this.model&&this.scene.remove(this.model);let t=e||this.charService.loadRaiderFromStorage();(!t||!t.base)&&(t={base:this.charService.ASSET_LIBRARY.base[0],hat:null,backpack:null,item:null});let n=this.charService.getAssetDetails("base",t.base);if(!n){console.error("Could not resolve base model");return}new U().load(n.modelUrl,c=>{this.model=c.scene,this.model.scale.set(1,1,1),this.model.position.set(0,-1,0),this.scene.add(this.model),c.animations.length>0&&(this.mixer=new Ht(this.model),this.mixer.clipAction(c.animations[0]).play()),t.hat&&this.attachSmartAccessory("hat",t.hat,"mixamorigHead"),t.backpack&&this.attachSmartAccessory("backpack",t.backpack,"mixamorigSpine2"),t.item&&this.attachSmartAccessory("item",t.item,"mixamorigRightHand")})}attachSmartAccessory(e,t,n){let i=this.charService.getAssetDetails(e,t);if(!i)return;let c=this.model.getObjectByName(n);if(!c)return;new U().load(i.modelUrl,w=>{let S=w.scene;S.traverse(C=>{C.isMesh&&(C.castShadow=!0,C.receiveShadow=!0,C.material&&(C.material.side=Dt))}),i.scale&&S.scale.setScalar(i.scale),i.rotation&&S.rotation.set(...i.rotation),i.offset&&S.position.set(...i.offset),c.add(S)})}animate(){this.animationId=requestAnimationFrame(()=>this.animate());let e=this.clock.getDelta();this.mixer&&this.mixer.update(e),this.model&&this.spinSpeed>.001?(this.model.rotation.y+=this.spinSpeed,this.spinSpeed*=.95):this.spinSpeed=0,this.renderer.render(this.scene,this.camera)}};a.\u0275fac=function(t){return new(t||a)(f($))},a.\u0275cmp=y({type:a,selectors:[["app-character-model"]],viewQuery:function(t,n){if(t&1&&Q(pn,5),t&2){let i;J(i=K())&&(n.rendererCanvas=i.first)}},decls:7,vars:3,consts:[["rendererCanvas",""],[1,"character-section"],[1,"three-canvas",3,"mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"],[1,"level-badge"],[1,"xp-badge"]],template:function(t,n){if(t&1){let i=P();E(0,"div",1)(1,"canvas",2,0),N("mousedown",function(u){return _(i),b(n.onStart(u))})("mousemove",function(u){return _(i),b(n.onMove(u))})("mouseup",function(){return _(i),b(n.onEnd())})("mouseleave",function(){return _(i),b(n.onEnd())})("touchstart",function(u){return _(i),b(n.onTouchStart(u))})("touchmove",function(u){return _(i),b(n.onTouchMove(u))})("touchend",function(){return _(i),b(n.onEnd())}),O(),E(3,"div",3),d(4),O(),E(5,"div",4),d(6),O()()}t&2&&(l(4),V("Level ",n.charService.state.level),l(2),Z("",n.charService.state.currentXp," / ",n.charService.state.maxXp," XP"))},styles:[".character-section[_ngcontent-%COMP%]{flex:1;height:30vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(to bottom,#4b4b4b,#000);position:relative;overflow:hidden;min-height:30vh}.character-section[_ngcontent-%COMP%]   .three-canvas[_ngcontent-%COMP%]{width:100%;height:100%;display:block;outline:none}.character-section[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);background:var(--ion-color-primary);color:#fff;padding:5px 15px;border-radius:20px;font-weight:700;z-index:10}.character-section[_ngcontent-%COMP%]   .xp-badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;align-items:center;gap:5px;background:#303030;padding:5px 12px;border-radius:20px;border:1px solid #4b60ff}.character-section[_ngcontent-%COMP%]   .xp-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#f57f17}"]});let r=a;return r})();function hn(r,a){if(r&1&&(o(0,"div"),d(1),s()),r&2){let m=a.$implicit;l(),M(m)}}function un(r,a){if(r&1&&(o(0,"div",19),v(1,hn,2,1,"div",20),s()),r&2){let m=I();l(),p("ngForOf",m.weekDays)}}function gn(r,a){if(r&1&&(o(0,"div",21)(1,"span"),d(2),s()()),r&2){let m=a.$implicit;x("empty",m.isEmpty)("completed",m.status==="completed")("missed",!m.isEmpty&&m.status==="missed")("today-border",m.isToday),l(2),M(m.label)}}var nn=(()=>{let a=class a{constructor(e){this.modalCtrl=e,this.segmentValue="month",this.currentViewDate=new Date,this.viewTitle="",this.gridSquares=[],this.weekDays=["S","M","T","W","T","F","S"],D({chevronBack:ke,chevronForward:Ie})}ngOnInit(){this.updateView()}close(){this.modalCtrl.dismiss()}segmentChanged(e){this.segmentValue=e.detail.value,this.currentViewDate=new Date,this.updateView()}changeDate(e){let t=new Date(this.currentViewDate);this.segmentValue==="week"?t.setDate(t.getDate()+e*7):this.segmentValue==="month"?t.setMonth(t.getMonth()+e):this.segmentValue==="year"&&t.setFullYear(t.getFullYear()+e),this.currentViewDate=t,this.updateView()}updateView(){this.segmentValue==="week"?this.generateWeekGrid():this.segmentValue==="month"?this.generateMonthGrid():this.segmentValue==="year"&&this.generateYearGrid()}generateWeekGrid(){let e=new Date(this.currentViewDate),t=e.getDay();e.setDate(e.getDate()-t),this.viewTitle=`Week of ${e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`,this.gridSquares=[];for(let n=0;n<7;n++){let i=new Date(e);i.setDate(i.getDate()+n),this.pushDayToGrid(i)}}generateMonthGrid(){let e=this.currentViewDate.getFullYear(),t=this.currentViewDate.getMonth();this.viewTitle=this.currentViewDate.toLocaleDateString("en-US",{month:"long",year:"numeric"}),this.gridSquares=[];let i=new Date(e,t,1).getDay();for(let u=0;u<i;u++)this.gridSquares.push({isEmpty:!0});let c=new Date(e,t+1,0).getDate();for(let u=1;u<=c;u++){let w=new Date(e,t,u);this.pushDayToGrid(w)}}generateYearGrid(){let e=this.currentViewDate.getFullYear();this.viewTitle=`${e}`,this.gridSquares=[];let t=e%4===0&&e%100!==0||e%400===0?366:365;for(let n=0;n<t;n++){let i=new Date(e,0,1);i.setDate(i.getDate()+n),this.pushDayToGrid(i,!0)}}pushDayToGrid(e,t=!1){let n=e.toDateString(),i=this.habit.history.some(w=>w.date===n),c=n===new Date().toDateString(),u=i||c&&this.habit.completed;this.gridSquares.push({date:e,label:t?"":e.getDate(),status:u?"completed":"missed",isToday:c})}};a.\u0275fac=function(t){return new(t||a)(f(Ut))},a.\u0275cmp=y({type:a,selectors:[["app-habit-detail-modal"]],inputs:{habit:"habit"},decls:35,vars:6,consts:[["slot","end"],[3,"click"],[1,"ion-padding"],["mode","ios",1,"ion-margin-bottom",3,"ionChange","value"],["value","week"],["value","month"],["value","year"],[1,"calendar-nav"],["fill","clear",3,"click"],["name","chevron-back"],[1,"nav-title"],["name","chevron-forward"],["class","days-header",4,"ngIf"],[1,"heatmap-container",3,"ngClass"],["class","heatmap-square",3,"empty","completed","missed","today-border",4,"ngFor","ngForOf"],[1,"legend"],[1,"legend-item"],[1,"dot","green"],[1,"dot","grey"],[1,"days-header"],[4,"ngFor","ngForOf"],[1,"heatmap-square"]],template:function(t,n){t&1&&(o(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3),s(),o(4,"ion-buttons",0)(5,"ion-button",1),g("click",function(){return n.close()}),d(6,"Close"),s()()()(),o(7,"ion-content",2)(8,"ion-segment",3),g("ionChange",function(c){return n.segmentChanged(c)}),o(9,"ion-segment-button",4)(10,"ion-label"),d(11,"Week"),s()(),o(12,"ion-segment-button",5)(13,"ion-label"),d(14,"Month"),s()(),o(15,"ion-segment-button",6)(16,"ion-label"),d(17,"Year"),s()()(),o(18,"div",7)(19,"ion-button",8),g("click",function(){return n.changeDate(-1)}),h(20,"ion-icon",9),s(),o(21,"div",10),d(22),s(),o(23,"ion-button",8),g("click",function(){return n.changeDate(1)}),h(24,"ion-icon",11),s()(),v(25,un,2,1,"div",12),o(26,"div",13),v(27,gn,3,9,"div",14),s(),o(28,"div",15)(29,"div",16),h(30,"span",17),d(31," Done"),s(),o(32,"div",16),h(33,"span",18),d(34," Empty"),s()()()),t&2&&(l(3),M(n.habit.title),l(5),p("value",n.segmentValue),l(14),M(n.viewTitle),l(3),p("ngIf",n.segmentValue!=="year"),l(),p("ngClass",n.segmentValue),l(),p("ngForOf",n.gridSquares))},dependencies:[T,F,A,R,Wt,Rt,Lt,jt,qt,zt,Bt,Gt,Xt,Yt,$t,At],styles:[".calendar-nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;background:#1e1e1e;border-radius:12px;padding:5px}.calendar-nav[_ngcontent-%COMP%]   .nav-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#fff}.days-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-bottom:8px;text-align:center}.days-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#666}.heatmap-container[_ngcontent-%COMP%]{display:grid;gap:8px}.heatmap-container.week[_ngcontent-%COMP%], .heatmap-container.month[_ngcontent-%COMP%]{grid-template-columns:repeat(7,1fr)}.heatmap-container.year[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(12px,1fr));gap:4px}.heatmap-square[_ngcontent-%COMP%]{aspect-ratio:1;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:600;color:#888;background:#2a2a2a}.heatmap-square.empty[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.heatmap-square.completed[_ngcontent-%COMP%]{background:var(--ion-color-success);color:#fff;box-shadow:0 0 10px #2dd36f4d}.heatmap-square.today-border[_ngcontent-%COMP%]{border:2px solid white}.legend[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:24px;margin-top:30px;margin-bottom:10px}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;font-weight:500;color:#aaa}.dot[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:4px;display:block}.dot.green[_ngcontent-%COMP%]{background:var(--ion-color-success);box-shadow:0 0 6px #2dd36f66}.dot.grey[_ngcontent-%COMP%]{background:#2a2a2a;border:1px solid rgba(255,255,255,.05)}"]});let r=a;return r})();function fn(r,a){if(r&1){let m=P();o(0,"ion-item-sliding")(1,"ion-item",9)(2,"ion-checkbox",10),g("ionChange",function(t){let n=_(m).$implicit,i=I();return b(i.onToggleHabit(t,n))}),s(),o(3,"div",11),h(4,"ion-icon",12),s(),o(5,"div",13),g("click",function(){let t=_(m).$implicit,n=I();return b(n.openHabitDetail(t))}),o(6,"ion-label")(7,"h2"),d(8),s(),o(9,"div",14),h(10,"ion-icon",15),o(11,"span"),d(12),s()()()(),o(13,"div",16),h(14,"ion-icon",12),o(15,"span"),d(16),s()()(),o(17,"ion-item-options",17)(18,"ion-item-option",18),g("click",function(){let t=_(m).$implicit,n=I();return b(n.deleteHabit(t))}),h(19,"ion-icon",19),s()()()}if(r&2){let m=a.$implicit,e=I();l(),x("rarity-low",m.reward==="low")("rarity-medium",m.reward==="medium")("rarity-high",m.reward==="high"),l(),p("checked",m.completed),l(2),p("name",m.icon),l(4),M(m.title),l(4),V("",m.streak," Days"),l(),p("ngClass",m.associatedStat),l(),p("name",e.getStatIcon(m.associatedStat)),l(2),M(m.associatedStat)}}var Qn=(()=>{let a=class a{constructor(e,t,n,i,c,u,w,S){this.modalCtrl=e,this.habitService=t,this.toastCtrl=n,this.alertCtrl=i,this.charService=c,this.soundService=u,this.achService=w,this.router=S,this.habits=[],D({settingsOutline:st}),D({water:St,barbell:ue,book:ve,bed:fe,bicycle:be,briefcase:Ce,gameController:Ae,fastFood:Pe,musicalNotes:Ne,paw:Qe,sunny:ut,moon:We,alarm:he,cart:we,cafe:ye,medkit:$e,school:rt,trash:bt,skull:dt,trophy:vt,rocket:nt,rose:it,fitness:Ve,flask:Fe,hammer:Re,heart:qe,hourglass:ze,key:Be,library:Ge,mail:Xe,map:Ye,mic:Ue,pencil:Je,people:Ke,pizza:Ze,planet:et,restaurant:tt,shapes:lt,shirt:ct,sparkles:mt,star:pt,storefront:ht,terminal:gt,thumbsUp:ft,timer:_t,tv:Ct,umbrella:yt,videocam:xt,walk:Mt,wallet:wt,wifi:kt,wine:It,accessibility:pe,basket:ge,beer:_e,camera:xe,car:Me,chatbubble:Se,clipboard:De,colorPalette:Ee,desktop:Oe,flame:He}),H(()=>{let C=this.achService.lastUnlocked();C&&this.presentAchievementToast(C)})}presentAchievementToast(e){return k(this,null,function*(){yield(yield this.toastCtrl.create({header:"Achievement Unlocked!",message:`${e.title} - Click to Claim`,position:"top",duration:4e3,color:"warning",icon:"trophy",buttons:[{side:"end",text:"CLAIM",handler:()=>{this.router.navigate(["/tabs/character"])}}]})).present()})}ionViewDidEnter(){this.habitService.checkDateAndReset(),this.habits=this.habitService.getHabits()}openHabitDetail(e){return k(this,null,function*(){return yield(yield this.modalCtrl.create({component:nn,componentProps:{habit:e}})).present()})}deleteHabit(e){return k(this,null,function*(){yield(yield this.alertCtrl.create({header:"Delete Habit?",message:`Are you sure you want to remove "${e.title}"?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:()=>{this.habitService.deleteHabit(e.id),this.refreshData(),this.showToast("Habit deleted")}}]})).present()})}getStatIcon(e){switch(e){case"strength":return"barbell";case"intelligence":return"book";case"constitution":return"heart";case"dexterity":return"flash";case"charisma":return"chatbubble";default:return"help-circle"}}getStatLabel(e){return e?e.substring(0,3).toUpperCase():""}showToast(e){return k(this,null,function*(){(yield this.toastCtrl.create({message:e,duration:1500,position:"bottom"})).present()})}onToggleHabit(e,t){return k(this,null,function*(){if(e.detail.checked)this.soundService.play("boop");else{this.habitService.uncompleteHabit(t.id),this.charService.modifyStat(t.associatedStat,t.difficulty,!0),this.refreshData();return}t.completed=!1;let i=yield this.modalCtrl.create({component:en,breakpoints:[0,.5,.8],initialBreakpoint:.5,cssClass:"custom-modal"});yield i.present();let{data:c}=yield i.onWillDismiss();c?(this.habitService.completeHabit(t.id,c),this.achService.notifyHabitComplete(t.streak),this.charService.modifyStat(t.associatedStat,t.difficulty,!1),this.refreshData()):this.refreshData()})}refreshData(){this.habits=this.habitService.getHabits()}openSettings(){return k(this,null,function*(){yield(yield this.modalCtrl.create({component:Qt,initialBreakpoint:1,breakpoints:[0,.5,1],handle:!0})).present()})}};a.\u0275fac=function(t){return new(t||a)(f(X),f(Jt),f(de),f(ce),f($),f(Nt),f(Kt),f(ee))},a.\u0275cmp=y({type:a,selectors:[["app-dashboard"]],decls:17,vars:2,consts:[[1,"ion-no-border"],["slot","start"],["slot","end",3,"click"],["name","settings-outline"],["scrollY","false",3,"fullscreen"],[1,"split-layout"],[1,"habits-section"],["lines","none",1,"habit-list"],[4,"ngFor","ngForOf"],[1,"habit-item"],["slot","start",3,"ionChange","checked"],["slot","start",1,"habit-icon-circle"],[3,"name"],[1,"content-wrapper",2,"flex","1","display","flex","align-items","center",3,"click"],[1,"streak-chip"],["name","flame"],[1,"stat-chip",3,"ngClass"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(t,n){t&1&&(o(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),h(3,"ion-menu-button"),s(),o(4,"ion-title"),d(5,"ARC Runners"),s(),o(6,"ion-buttons",2),g("click",function(){return n.openSettings()}),o(7,"ion-button"),h(8,"ion-icon",3),s()()()(),o(9,"ion-content",4)(10,"div",5),h(11,"app-character-model"),o(12,"div",6)(13,"h3"),d(14,"Today's Quests"),s(),o(15,"ion-list",7),v(16,fn,20,13,"ion-item-sliding",8),s()()()()),t&2&&(l(9),p("fullscreen",!0),l(7),p("ngForOf",n.habits))},dependencies:[T,F,A,te,tn,q,z,B,G,j,le,L,Y,se,ne,re,me,ae,oe,ie],styles:[".urbanist-font[_ngcontent-%COMP%]{font-family:Urbanist,sans-serif!important}.split-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden}.habits-section[_ngcontent-%COMP%]{overflow-y:auto;-webkit-overflow-scrolling:touch;flex:1;background:#000;border-top-left-radius:30px;border-top-right-radius:30px;box-shadow:0 -5px 20px #0000000d;padding:20px 20px 100px;margin-top:-20px;z-index:10}.habit-item[_ngcontent-%COMP%]{margin-bottom:0;--border-radius: 12px;border-radius:12px;--color: white}.habit-item.rarity-low[_ngcontent-%COMP%]{--background: #37474f;border:1px solid #546e7a}.habit-item.rarity-medium[_ngcontent-%COMP%]{--background: #1565c0;border:1px solid #42a5f5}.habit-item.rarity-high[_ngcontent-%COMP%]{--background: #5d144b;border:1px solid #ff00e6}ion-item-sliding[_ngcontent-%COMP%]{margin-bottom:12px;background:transparent;border-radius:12px}.habit-list[_ngcontent-%COMP%]{border-radius:10px}.streak-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;background:#fff3;padding:4px 10px;border-radius:20px;margin-top:6px;width:fit-content}.streak-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;color:#ffca28}.streak-chip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#fff;letter-spacing:.5px}.meta-row[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:6px}.stat-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;border-radius:6px;font-size:10px;font-weight:800;letter-spacing:.5px;background:#0003;color:#fff;border:1px solid rgba(255,255,255,.1)}.stat-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.stat-chip.strength[_ngcontent-%COMP%]{background:#f4433633;color:#ff8a80;border-color:#f44336}.stat-chip.intelligence[_ngcontent-%COMP%]{background:#2196f333;color:#90caf9;border-color:#2196f3}.stat-chip.constitution[_ngcontent-%COMP%]{background:#4caf5033;color:#a5d6a7;border-color:#4caf50}.stat-chip.dexterity[_ngcontent-%COMP%]{background:#ff980033;color:#ffcc80;border-color:#ff9800}.stat-chip.charisma[_ngcontent-%COMP%]{background:#9c27b033;color:#ce93d8;border-color:#9c27b0}.streak-chip[_ngcontent-%COMP%]{height:fit-content}"]});let r=a;return r})();export{Qn as DashboardPage};
